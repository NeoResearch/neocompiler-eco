  <div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <ol class="breadcrumb">
                <li><a href="/index.html"><i class="fas fa-home"></i></a>
                </li>
                <li class="active"><i class="fa fa-flask" aria-hidden="true"></i> EcoLab (NEO Ecosystem Laboratory)</li>
            </ol>
        </div>
    </div>

    <!-- ======================================================== -->
    <!-- ======================================================== -->
    <!-- ======================================================== -->
    <!-- BEGIN DIV MAIN CONTENTS - MENU AND CONTENT -->
        <div class="col-sm-2 sidenav">
            <ul class="nav nav-pills nav-stacked" id="pillstab">
              <li class="active"><a href="#!/ecolab/compilers" data-target="#compilers" data-toggle="tab">Compilers</a></li>
              <li><a href="#!/ecolab/network" data-target="#network" data-toggle="tab" >Deploy & Invoke</a></li>
              <li><a href="#!/ecolab/transaction"  data-target="#transaction" data-toggle="tab" >Send & Build</a></li>
              <li><a href="#!/ecolab/rawRPC" data-target="#rawRPC" data-toggle="tab">Raw RPC</a></li>
              <li><a href="#!/ecolab/activity" data-target="#activity" data-toggle="tab">Activity</a></li>
              <li><a href="#!/ecolab/utils"  data-target="#utils" data-toggle="tab">Storage Query</a></li>
              <li><a href="#!/ecolab/wallet"  data-target="#wallet" data-toggle="tab" onclick="populateAllWalletData()">Wallet/Addresses</a></li>
              <li><a href="#!/ecolab/conversor" data-target="#conversor" data-toggle="tab">Conversors</a></li>
              <li><a href="#!/ecolab/cnnodesinfo"  data-target="#cnnodesinfo" data-toggle="tab" onclick="getNodeInfo()">Consensus <i class="fas fa-info"></i></a></li>
              <li><a href="#!/ecolab/statistics" data-target="#statistics" data-toggle="tab" onclick="callCoreMetricsFromForm()">Statistics <i class="fas fa-chart-bar"></i></a></li>
              <li><a href="#!/ecolab/configurations"  data-target="#configurations" data-toggle="tab">Settings <i class="fas fa-cogs"></i></a></li>
            </ul>
        </div>

        <!-- ======================================================== -->
        <!-- BEGIN DIV MAIN CONTENTS - EVERYTHING IS HERE - I -->
        <div class="col-sm-10">
            <!-- ======================================================== -->
            <!-- BEGIN FIXED DIV OF NETWORKS -->
            <div class="row">
                <div class="col-md-2">
                    <!--<p><strong>Current Url</strong>: {{ vm.currentUrl }}</p>-->
                    Network<span class="label label-success"><i class="fas fa-network-wired"></i></span>
                    <select id="ecolabnetworkurlselection" class="custom-select form-control">
                      <option title="NeoCompiler Eco services">NeoCompiler Eco</option>
                      <option title="Localhost services">Localhost</option>
                      <option title="MainNet services">NEO MainNet (unsafe)</option>
                      <option title="Testnet services">NEO TestNet</option>
                    </select>
                </div>
                <div class="col-md-2">
                  Provider<span class="label label-success"><i class="fas fa-wallet"></i></span>
                    <select id="ecolabproviderselection" class="custom-select form-control">
                      <option title="NeoCompiler-Eco">NeoCompiler-Eco</option>
                      <option title="NeoLogin">NeoLogin</option>
                    </select>
                </div>
            </div>
            <!-- END FIXED DIV OF NETWORKS -->
            <!-- ======================================================== -->


            <!-- ======================================================== -->
            <!-- ======================================================== -->
            <!-- BEGIN DIV MAIN CONTENTS - EVERYTHING IS HERE - II -->
            <div class="tab-content">
                <!-- ======================================================== -->
                <!-- BEGIN DIV CONVERSIONS -->
                <div class="tab-pane fade" id="conversor">
                    <div class="panel panel-primary">
                        <div class="panel-heading">String <-> Hex</div>
                        <div class="panel-body">
                            <form id="str2hash">
                              <div class="row">
                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label for="strhex_str">String</label>
                                    <input id="strhex_str" class="form-control" placeholder="String" oninput="str2hex()"/>
                                  </div>
                                </div>
                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label for="strhex_hex">Hex</label>
                                    <input id="strhex_hex" class="form-control" placeholder="Hex" oninput="hex2str()"/>
                                  </div>
                                </div>
                                <div class="col-md-2">
                                  <div class="form-group">
                                    <label for="hex_length">Length (in bytes)</label>
                                    <input id="hex_length" class="form-control" placeholder="Length (in bytes)" readonly/>
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading">Hex <-> xeH</div>
                        <div class="panel-body">
                            <form id="frmreverse">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="hexxeh_hex">Hex</label>
                                    <input id="hexxeh_hex" class="form-control" placeholder="Hex" oninput="hex2xeh()"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="hexxeh_xeh">xeH</label>
                                    <input id="hexxeh_xeh" class="form-control" placeholder="xeH" oninput="xeh2hex()"/>
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading">Number <-> Fixed8 Hex</div>
                        <div class="panel-body">
                            <form id="num2fixed8">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="fx8_number">Number</label>
                                    <input type="number" id="fx8_number" class="form-control" placeholder="Number" oninput="num2fixed8()"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="fx8_hex">Fixed8</label>
                                    <input id="fx8_hex" class="form-control" placeholder="Fixed8 hex" oninput="fixed82num()"/>
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>

                    <div class="panel panel-primary">
                        <div class="panel-heading">Address <-> ScriptHash (big endian)</div>
                        <div class="panel-body">
                            <form id="addressscripthash">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="address">Address</label>
                                    <input id="address" class="form-control" placeholder="Address" oninput="address2scripthash()"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="scripthash">ScriptHash (big endian, should start with 0x)</label>
                                    <input id="scripthash" class="form-control" placeholder="ScriptHash" oninput="scripthash2address()"/>
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>

                    <div class="panel panel-primary">
                        <div class="panel-heading">BigInteger <-> Little-Endian ByteArray</div>
                        <div class="panel-body">
                            <form id="convert_bigint_to_bytearray">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="convert_bigint">BigInteger</label>
                                    <input id="convert_bigint" class="form-control" placeholder="BigInteger" oninput="conv_bigint2bebytearray()"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="convert_bytearray">Little-Endian ByteArray</label>
                                    <input id="convert_bytearray" class="form-control" placeholder="Little Endian ByteArray" oninput="conv_bebytearray2bigint()" />
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>

                    <div class="panel panel-primary">
                        <div class="panel-heading">Hex String -> Hash</div>
                        <div class="panel-body">
                            <form id="convert_string_to_hash">
                              <div class="row">
                                <div class="col-md-3">
                                  <div class="form-group">
                                    <label for="convert_string_hash">Hex String</label>
                                    <input id="convert_string_hash" class="form-control" placeholder="Input String to Hash" oninput="conv_string_hash()"/>
                                  </div>
                                </div>
                                <div class="col-md-3">
                                  <div class="form-group">
                                    <label for="convert_string_hash160">Hash160 (scripthash little endian format)</label>
                                    <input id="convert_string_hash160" class="form-control" placeholder="Hash160 (Sha256+Ripemd160)" readonly />
                                  </div>
                                </div>
                                <div class="col-md-3">
                                  <div class="form-group">
                                    <label for="convert_string_sha256">Sha256</label>
                                    <input id="convert_string_sha256" class="form-control" placeholder="Sha256" readonly />
                                  </div>
                                </div>
                                <div class="col-md-3">
                                  <div class="form-group">
                                    <label for="convert_string_hash256">Hash256</label>
                                    <input id="convert_string_hash256" class="form-control" placeholder="Hash256 (Sha256+Sha256)" readonly />
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>


                    <div class="panel panel-primary">
                        <div class="panel-heading">Disassembly opcodes</div>
                        <div class="panel-body">
                            <form id="frm_disassembly">
                              <div class="row">
                                <div class="col-md-12">
                                  <div class="form-group">
                                    <label for="avmcode">AVM hex</label>
                                    <textarea id="avmcode" class="form-control" placeholder="AVM code" oninput="Disassembly()"></textarea>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <label for="sc_scripthash">ScriptHash (big endian, starting with 0x)</label>
                                  <input type="text" id="sc_scripthash" class="form-control" placeholder="Script Hash" readonly></input>
                                </div>
                                <div class="col-md-6">
                                  <label for="sc_address58">Address</label>
                                  <input type="text" id="sc_address58" class="form-control" placeholder="Address (Base58)" readonly></input>
                                </div>
                                <div class="col-md-12">
                                  <div class="form-group">
                                    <label for="opcodes">OpCodes</label>
                                    <textarea id="opcodes" class="form-control" rows="5" cols="100" readonly></textarea>
                                  </div>
                                </div>
                              </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- END DIV CONVERSIONS -->
                <!-- ======================================================== -->

                <!-- ======================================================== -->
                <!-- BEGIN UTILS TRANSACTION -->
                <div class="tab-pane fade" id="utils">

                  <div class="panel panel-primary">
                      <div class="panel-heading">Read storage from a Smart Contract</div>
                      <div class="panel-body">
                          <form id="formgetstorage" method="post">
                              <label for="gsf_contracthash">ScriptHash</label>
                              <input id="gsf_contracthash" class="form-control" placeholder="Contract Hash"/>
                              <label for="getStorageFormat">Input Key</label>
                              <div class="row">
                                <div class="col-md-6">
                                  <input id="gsf_contractkey" class="form-control" placeholder="Storage Key"/>
                                </div>
                                <div class="col-md-6">
                                  <select name="getStorageFormat" id="getStorageFormat" class="custom-select form-control">
                                    <option title="gsf_string" selected>String (no quotes)</option>
                                    <option title="gsf_hex">Hex</option>
                                  </select>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-12">
                                  <button type="submit" id="gsfsubmit" style="margin-bottom: 10px; margin-top: 10px;" class="btn btn-info" data-toggle="modal"><i class="fas fa-hdd"></i></button>
                                </div>
                              </div>
                              <label for="gsf_contractvalue">Output Value</label>
                              <div class="row">
                                <div class="col-md-6">
                                    <input id="gsf_contractvaluehex" class="form-control" placeholder="Storage Value (Hex)" readonly/>
                                </div>
                                <div class="col-md-6">
                                    <input id="gsf_contractvaluestr" class="form-control" placeholder="Storage Value (String)" readonly/>
                                </div>
                                <div class="col-md-6">
                                    <input id="gsf_contractvalueint" class="form-control" placeholder="Storage Value (BigInteger)" readonly/>
                                </div>
                              </div>
                          </form>
                      </div>
                  </div>

                  <div class="panel panel-primary">
                      <div class="panel-heading">NEP5 Balance</div>
                      <div class="panel-body">
                          <form id="getnep5balance" action="">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="getnep5_contract">Contract (scripthash)</label>
                                  <input id="getnep5_contract" class="form-control" placeholder="Contract" required/>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="getnep5_address">Address (base58)</label>
                                  <input id="getnep5_address" class="form-control" placeholder="Address" required/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-12">
                                <button type="submit" style="margin-bottom: 10px;" id="txgetnep5balance" class="btn btn-info"><i class="fas fa-phone"></i></button>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="output_getnep5">Output</label>
                                  <input id="output_getnep5" class="form-control" placeholder="NEP5 balance" readonly required/>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="output_getnep5_extra">Address (base58) + Height</label>
                                  <input id="output_getnep5_extra" class="form-control" placeholder="NEP5 extra info" readonly required/>
                                </div>
                              </div>
                            </div>
                         </form>
                       </div>
                  </div>

                  <div class="panel panel-primary">
                      <div class="panel-heading">
                        Incremental storage
                        <button type="submit" onClick="getIncrementalStorageInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button><br>
                        <input id="heightForIncStorage" class="form-control" value="0" placeholder="0" oninput="getIncrementalStorageInfo()"/>
                      </div>
                      <div class="panel-body">
                        <div class="row">
                          <div class="col-md-12">
                             <textarea id="textAreaOfIncrementalStorage" readonly="readonly" style="font-size: 15px;" rows="15" cols="100" placeholder="Incremental storage for any height..." class="form-control"></textarea><br>
                           </div>
                         </div>
                      </div>
                  </div>

                </div>
                <!-- END UTILS TRANSACTION -->
                <!-- ======================================================== -->

                <!-- ======================================================== -->
                <!-- BEGIN DIV TRANSACTION -->
                <div class="tab-pane fade" id="transaction">

                    <div class="panel panel-primary">
                        <div class="panel-heading">Create TX: Transfer UTXO Assets<br>
                          <button type=button onClick="goToWalletCentral()" id="btn_register_new_address" class="btn btn-warning btn-sm">Register new address</button>
                        </div>
                        <div class="panel-body">
                            <form id="createtx" action="">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label for="createtx_from">From(Address)</label>
                                    <button type=button onClick="createGasTxForm()" id="txclaimgas" class="btn btn-info btn-sm">Claim</button>
                                    <select name="createtx_from" id="createtx_from" class="custom-select form-control" size="3"></select>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label for="createtx_to">To(Address)</label>
                                    <select name="createtx_to" id="createtx_to" class="custom-select form-control" size="3"></select>
                                    <!-- <input name="createtx_to" id="createtx_to" placeholder="Destination Address" size="40"></input>-->
                                  </div>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-16">
                                  <div class="col-md-4">
                                    <div class="form-group">
                                      <button type=button onClick="fillAllNeo()" id="txcreatesendallneo" class="btn btn-info btn-sm">All Neo</button>
                                      <input type="number" id="createtx_NEO" value="0" class="form-control" placeholder="NEO" required/>
                                    </div>
                                  </div>

                                  <div class="col-md-4">
                                    <div class="form-group">
                                      <button type=button onClick="fillAllGas()" id="txcreatesendallgas" class="btn btn-info btn-sm">All Gas</button>
                                      <input type="number" id="createtx_GAS" value="0" class="form-control" placeholder="GAS" required/>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                      <button type=button onClick="createSendTxForm()" id="txcreate" class="btn btn-primary btn-sm">Send</button>
                                  </div>
                                </div>
                              </div>
                           </form>
                         </div>
                    </div>

                    <!-- BEGIN Create TX Withdraw -->
                    <div class="panel panel-primary">
                        <div class="panel-heading">Create TX: Withdraw UTXO Assets from Contract</div>
                        <div class="panel-body">
                            <form id="frm_createtx_withdraw" action="">
                              <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="createtx_from_contract">From: Verification Script in hex</label>
                                    <textarea id="createtx_from_contract" class="form-control" placeholder="From Contract Hex Script"/>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <label for="createtx_from_scripthash">Scripthash big-endian (readonly)</label>
                                        <input id="createtx_from_scripthash" class="form-control" placeholder="scripthash" required readonly/>
                                      </div>
                                      <div class="col-md-6">
                                        <label for="createtx_from_address">Address (readonly)</label>
                                        <input id="createtx_from_address" class="form-control" placeholder="address" required readonly/>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <button type="button" onClick="addContractToWalletFromVerification()" id="btnNewVerificationContractToWallet" class="btn btn-success btn-sm"><i class="fas fa-user-plus"></i> Add to wallet</button>
                                      </div>
                                    </div>
                                    <label for="createtx_from_verification">Invocation in hex</label>
                                    <textarea id="createtx_from_verification" class="form-control" placeholder="Verification/Withdraw Hex Script" required/>
                                    <label for="createtx_from_verification_opcodes">Invocation script opcodes (readonly)</label>
                                    <textarea id="createtx_from_verification_opcodes" class="form-control" placeholder="Verification/Withdraw Hex Script Opcodes" readonly/>
                                    <label for="createtx_script_attributes">Script Attributes</label>
                                    <textarea id="createtx_script_attributes" class="form-control" placeholder="Script Attributes, one per line"/>
                                    <label for="createtx_attributes">Attributes: 20 Script big-end (20B), 30 Vote, (32B), f0-ff remarks (variable), a1-af hashes (32B)</label>
                                    <textarea id="createtx_attributes" class="form-control" placeholder="Attributes, one per line"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <select id="createtx_input_assetid" onchange="verifyRPCNetworkForWithdrawUTXO();" required>
                                      <option>Select an asset</option>
                                      <option value="c56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b">NEO</option>
                                      <option value="602c79718b16e442de58778e148d0b1084e3b2dffd5de6b7b16cee7969282de7">GAS</option>
                                    </select><br/>
                                    <label for="createtx_input_utxo2">Input UTXO</label><br/>
                                    <select id="createtx_input_utxo2" name="createtx_input_utxo2" required multiple></select>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label for="createtx_output_addresses">Output/To Address (One per line)</label>
                                    <textarea id="createtx_output_addresses" class="form-control" placeholder="Address1 \n Address2 \n OriginalAddress (For Change)"/>
                                    <label for="createtx_output_addresses">Output/To Values (One per line)</label>
                                    <textarea id="createtx_output_values" class="form-control" placeholder="1 \n 5 \n 3"/>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <input type="checkbox" id="createtx_cbx_change" checked>Add change automatically</input><br/>
                                    <label id="createtx_output_total">Total: 0 NEO (expected 0)</label><br/>
                                    <label for="createtx_signature">Generate Signature (Optional)</label>
                                    <input id="createtx_signature" class="form-control" placeholder="Private Key (32 bytes)" pattern=".{0}|.{64,64}" title="Must be 32 bytes hex string (or empty)"/>
                                    <!-- document.getElementById("createtx_signature").checkValidity() -->
                                    <button type="button" id="createtx_create_sign" class="btn btn-info btn-sm" onclick="createtx_sign();"><i class="fas fa-file-signature"></i> Sign</button>
                                    <!-- Neon.wallet.generateSignature -->
                                    <!-- https://github.com/CityOfZion/neon-js/blob/cf5f92e4124c45a154449bf5852bcab28ddc1b32/src/wallet/core.js#L126 -->
                                  </div>
                                </div>
                                <div class="col-md-12">
                                  <label for="createtx_txhex">Transaction Header/Message Hash</label>&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" placeholder="transaction hash (big endian UInt256/32 bytes)" id="createtx_txhash" size="50"></input><br/>
                                  <textarea id="createtx_txhex" class="form-control" placeholder="transaction hex"/>
                                </div>
                                <div class="col-md-12">
                                  <button id="txcreate_withdraw" type="button" class="btn btn-info btn-sm" onclick="create_withdrawtx();">Create Withdraw Transaction</button>
                                  <button type="submit" id="txcreatesubmit_withdraw" class="btn btn-info btn-sm">Submit Withdraw Transaction</button>
                                </div>
                              </div>
                           </form>
                         </div>
                       </div>
                       <!-- END Create TX Withdraw -->
                </div>
                <!-- END DIV TRANSACTION -->
                <!-- ======================================================== -->

                <!-- ======================================================== -->
                <!-- BEGIN DIV WALLETS INFO -->
                <div class="tab-pane fade" id="wallet">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                          Wallet
                          <button type="submit" onClick="populateAllWalletData();" id="btnReloadall" style="margin-bottom: 10px;" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                        </div>
                        <div class="panel-body">
                            <div id="divWalletsStatus" class="table-responsive"></div>
                        </div>
                    </div>
                    <div class="panel panel-info">
                        <div class="panel-heading">Register new account</div>
                        <div class="panel-body">
                          <div class="row">
                            <div class="col-md-6">
                                Address (17 bytes): <input style="color: green;" type="text" name="addressToAddBox" id="addressToAddBox" maxlength="34" placeholder="AK2nJJpJr6o664CWJKi1QRXjqeic2zRp8y" size="32" title="public address (base58)"/>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                ScriptHash (20 bytes): <input style="color: green;" type="text" name="scriptHashToAddBox" id="scriptHashToAddBox" maxlength="40" placeholder="e9eed8dc39332032dc22e5d6e86332c50327ba23" size="38" title="scripthash"/>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                PublicKey (33 bytes): <input style="color: green;" type="text" name="pubKeyToAddBox" id="pubKeyToAddBox" maxlength="66" placeholder="031a6c6fbbdf02ca351745fa86b9ba5a9452d785ac4f7fc2b7548ca2a46c4fcf4a" size="62"/>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                WIF (26 bytes): <input style="color: green;" type="text" name="wifToAddBox" id="wifToAddBox" maxlength="52" placeholder="KxDgvEKzgSBPPfuVfw67oPQBSjidEiqTHURKSDL1R7yGaGYAeYnr" size="50" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                PrivateKey (32 bytes): <input style="color: green;" type="text" name="privKeyToAddBox" id="privKeyToAddBox" maxlength="64" placeholder="1dd37fba80fec4e6a6f13fd708d8dcb3b29def768017052f6c930fa1c5d90bbb" size="60" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                EncryptedKey (29 bytes): <input style="color: green;" type="text" name="encryptedKeyToAddBox" id="encryptedKeyToAddBox" maxlength="58" value="" placeholder="6PYMLN5gxjEJ1u4zoTADWM2gphfXRszFKi4QCq6FjwumwPWsf1LoZpvFxU" size="58" />
                            </div>
                          </div>
                          <input data-toggle="collapse" data-target="#div_addMultiSig_byVerification" type="checkbox" id="cbx_multisig" name="cbx_multisig">Multisig</input><br/>
                          <div class="panel-body collapse" id="div_addMultiSig_byVerification">
                              VerificationScript (? bytes): <input style="color: green;" type="text" name="vsToAddBox" id="vsToAddBox" maxlength="1000" value="" placeholder="21031a6c6fbbdf02ca351745fa86b9ba5a9452d785ac4f7fc2b7548ca2a46c4fcf4aac" size="40" /> <br>
                          </div>
                          <div class="row">
                            <div class="col-md-6">
                                <button type="button" onClick="addWalletFromForm();" id="btnNewWallet" class="btn btn-success btn-sm"><i class="fas fa-user-plus"></i></button>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="panel panel-info">
                        <div class="panel-heading">Accounts detailed info</div>
                        <div class="panel-body">

                            <div class="row">
                              <div class="col-md-4">
                                <span class="label label-primary">Pick an address:</span>
                                <select name="wallet_info" onChange="changeWalletInfo();" id="wallet_info" class="custom-select form-control"></select>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-md-2">
                                <span class="label label-success">AddressBase58:</span>
                                <textarea id="walletInfoAddressBase58" readonly="readonly" name="infoAddressBase58" placeholder="infoAddressBase58 (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">ScriptHash:</span>
                                <textarea id="walletInfoScripthash" readonly="readonly" name="infoScriptHash" placeholder="infoScriptHash (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">PublicKey:</span>
                                <textarea id="walletInfoPubKey" readonly="readonly" name="infoPubKey" placeholder="infoPubKey (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">VerificationScript:</span>
                                <textarea id="addressVerificationScript" readonly="readonly" name="VerificationScriptInfo" placeholder="VerificationScriptInfo (Pick a wallet id)"/>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-md-2">
                                <span class="label label-success">WIF:</span>
                                <textarea id="walletInfoWIF" readonly="readonly" name="infoWIF" placeholder="infoWIF (Pick a wallet id)" />
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">PrivateKey:</span>
                                <textarea id="walletInfoPrivateKey" readonly="readonly" name="infoPrivateKey" placeholder="infoPrivateKey (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">Print:</span>
                                <textarea id="addressPrintInfo" readonly="readonly" name="printInfo" placeholder="printInfo (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">Owners:</span>
                                <textarea id="addressOwners" readonly="readonly" name="ownersInfo" placeholder="ownersInfo (Pick a wallet id)"/>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-md-2">
                                <br /><button type="" onClick="removeAccountFromEcoWallet(document.getElementById('wallet_info').selectedOptions[0].index)" class="btn btn-danger btn-sm">
                                  <i class="fas fa-user-minus"></i> Remove account
                                </button>
                              </div>
                              <div class="col-md-2">
                                <span class="label label-success">EncryptedKey:</span>
                                <textarea id="walletInfoEncrypted" readonly="readonly" name="walletInfoEncrypted" placeholder="walletInfoEncrypted (Pick a wallet id)"/>
                              </div>
                              <div class="col-md-2">
                                  <form class="form-group" onSubmit="decrypt()">
                                    <div id="dialog" title="Basic dialog" hidden>
                                      <input autocomplete=​"eco" id="passwordNep2" class="form-control" type="password" placeholder=​"EnterPassword" />
                                      <button type="submit" class="form-control btn btn-info btn-sm">Decrypt</button>
                                    </div>
                                  </form>
                              </div>
                            </div>

                        </div> <!-- END PANEL BODY -->
                    </div>
           </div>
           <!-- END DIV WALLETS INFO -->
           <!-- ======================================================== -->

           <!-- ======================================================== -->
           <!-- BEGIN DIV NODEINFO -->
            <div class="tab-pane fade" id="cnnodesinfo">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Node1
                        <button type="submit" onClick="getNodeInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12">
                          <textarea id="node1data" class="form-control" style="font-size: 12px;" rows=15 readonly></textarea>
                        </div>
                      </div>
                    </div>
                </div> <!-- node1 end -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Node2
                        <button type="submit" onClick="getNodeInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12">
                          <textarea id="node2data" class="form-control"  style="font-size: 12px;" rows=15 readonly></textarea>
                        </div>
                      </div>
                    </div>
                </div> <!-- node2 end -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Node3
                        <button type="submit" onClick="getNodeInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12">
                          <textarea id="node3data" class="form-control"  style="font-size: 12px;" rows=15 readonly></textarea>
                        </div>
                      </div>
                    </div>
                </div> <!-- node3 end -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Node4
                        <button type="submit" onClick="getNodeInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12">
                          <textarea id="node4data" class="form-control"  style="font-size: 12px;" rows=15 readonly></textarea>
                        </div>
                      </div>
                    </div>
                </div> <!-- noderpc end -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        NodeRPC(WatchOnly)
                        <button type="submit" onClick="getNodeInfo()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12">
                          <textarea id="noderpcdata" class="form-control"  style="font-size: 12px;" rows=15 readonly></textarea>
                        </div>
                      </div>
                    </div>
                </div> <!-- noderpc end -->
            </div>
          <!-- END DIV NODES INFO -->
          <!-- ======================================================== -->

          <!-- ======================================================== -->
          <!-- BEGIN STATISTICS NODEINFO -->
           <div class="tab-pane fade" id="statistics">
               <div class="panel panel-primary">
                   <div class="panel-heading">
                       Blocks timestamps
                       <button type="submit" onClick="callCoreMetricsFromForm()" class="btn btn-info btn-sm"><i class="fas fa-sync-alt"></i></button>
                   </div>

                   <div class="panel-body">
                     <div class="row">
                       <div class="col-md-2">
                         <span class="label label-success">Max nBlocks to query</span>
                         <br/><input type="text" onchange="callCoreMetricsFromForm()" id="cbx_blocks_toQuery" value="50" size="2">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Height to start</span>
                         <br/><input type="text" onchange="callCoreMetricsFromForm()" id="cbx_height_toQuery" value="-1" size="2" data-toggle="tooltip" data-placement="top" title="Leave -1 if you want to get blocks from ending in the last known height.">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Min/Max yTick timeseries</span>
                         <br/><input type="text" onchange="reloadTSGraph()" id="cbx_min_yTick_ts_value" value="-1" size="1">
                         <input type="text" onchange="reloadTSGraph()" id="cbx_max_yTick_ts_value" value="3" size="1">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Theoretical blocktime</span>
                         <br/><input type="text" onchange="calculateNumericalStatistics()" id="cbx_theoretical_blocktime" value="1" size="2">
                       </div>
                     </div>

                     <div class="row">
                       <div class="col-md-8">
                         <textarea id="txt_area_timestampsStats" placeholder="Block time statistics..." class="form-control" style="font-size: 12px;" rows=5 readonly></textarea>
                       </div>
                     </div>

                     <div class="row">
                       <div class="col-md-8">
                         <canvas id="canvas_blocktime_chart"></canvas>
                       </div>
                     </div>
                   </div>

               </div> <!-- Statis end -->
           </div>
         <!-- END DIV STATISTICS INFO -->
         <!-- ======================================================== -->

          <!-- ======================================================== -->
          <!-- BEGIN CONFIGURATIONS NODEINFO -->
           <div class="tab-pane fade" id="configurations">
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Personalized Base Paths
                 </div>
                 <div class="panel-body">
                   <div class="col-md-2">
                       <!-- <input type="text" onchange="updatePATHS()" id="neonodeurl" class="form-control" placeholder="network, ex: http://localhost:30333" value="https://node1.neocompiler.io">-->
                       <span class="label label-success">Neo-cli RPCs</span>
                       <select id="selectionBoxRPCNodes" class="custom-select form-control"></select>
                       <span class="label label-info">Selected service</span>
                       <input type="text" onchange="updateBASEPATHS()" id="rpc_nodes_path" value="------">
                   </div>
                   <div class="col-md-2">
                       <span class="label label-success">Compilers</span>
                       <select id="selectionBoxCompilers" class="custom-select form-control"></select>
                       <span class="label label-info">Selected service</span>
                       <input type="text" onchange="updateBASEPATHS()" id="compilers_path" value="------">
                   </div>
                   <div class="col-md-2">
                       <span class="label label-success">EcoServices</span>
                       <select id="selectionBoxEcoServices" class="custom-select form-control"></select>
                       <span class="label label-info">Selected service</span>
                       <input type="text" onchange="updateBASEPATHS()" id="eco_services_path" value="------">
                   </div>
                   <div class="col-md-2">
                       <span class="label label-success">NEOSCAN</span>
                       <select id="selectionBoxNeoScan" class="custom-select form-control"></select>
                       <span class="label label-info">Selected service</span>
                       <input type="text" onchange="updateBASEPATHS()" id="neoscan_path" value="------">
                   </div>
                   <!--
                   <div class="col-md-2">
                       <span class="label label-success">REST Notifications</span>
                       <input type="text" onchange="updateBASEPATHS()" id="rest_notifications_path" value="------">
                       <span class="label label-info">Selected service</span>
                       <select id="selectionBoxRestNotifications" class="custom-select form-control"></select>
                   </div>
                 -->
                 </div>
               </div>
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Automatic selection
                 </div>
                 <div class="panel-body">
                   <div class="col-md-2">
                       <span class="label label-success">Compiler server</span>
                       <br/><input type="checkbox" id="cbx_automatic_compiler" checked>Pick best ping compiler</input><br/>
                   </div>
                   <div class="col-md-2">
                       <span class="label label-success">RPC c# neo-cli</span>
                       <br/><input type="checkbox" id="cbx_automatic_node_best_height" onchange="updateAutomaticNodeSelectionFlag()" checked>Pick best height node</input><br/>
                   </div>
                 </div>
               </div>
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Consensus Node
                 </div>
                 <div class="panel-body">
                   <div class="form-group">
                     <div class="row">
                           <div class="col-md-2">
                             <span class="label label-success">Seconds per block</span>
                             <br/><input type="text" id="cbx_spb_cn" placeholder="15" size="2">
                           </div>
                           <div class="col-md-2">
                             <span class="label label-success">Password</span>
                             <br/><input type="text" id="cbx_pwd_cn" placeholder="neoresearch" size="12">
                           </div>
                      </div>
                      <div class="row">
                            <div class="col-md-2">
                              <button type=button onClick="onClickBtnSetCNBlockTime()" id="btc_set_cn_pwd" class="btn btn-sucess btn-sm">Set</button>
                            </div>
                      </div>
                   </div>
                 </div>
               </div>
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Explorers
                 </div>
                 <div class="panel-body">
                   <div class="form-group">
                     <div class="row">
                           <div class="col-md-2">
                             <span class="label label-success">View NEOSCAN</span>
                             <br/><input type="checkbox" id="cbx_enable_neoscan">View links and statistics of NEOSCAN</input>
                           </div>
                           <div class="col-md-2">
                             <span class="label label-success">Perform Queries using NEOSCAN</span>
                             <br/><input type="checkbox" id="cbx_query_neoscan">Queries (UTXO, Claims, Neon.ApiProvide) with NEOSCAN</input>
                           </div>
                      </div>
                   </div>
                 </div>
               </div>
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Configs
                 </div>
                 <div class="panel-body">
                   <div class="form-group">
                      <div class="row">
                           <div class="col-md-2">
                             <span type="checkbox" class="label label-success"><i class="fas fa-bell-slash"></i> Disable notifications</span>
                             <br/><input type="checkbox" id="cbx_ecoNotifications"></input>
                           </div>
                            <div class="col-md-3">
                              <span class="label label-success">Password</span>
                              <br/><input type="text" id="cbx_pwd_reset_service" placeholder="dockerreset" size="12">
                              <br/><button type=button onClick="onClickPostServerToResetDockerService()" id="btn_reset_service_pwd" class="btn btn-warning btn-sm">Reset docker service</button>
                            </div>
                       </div>
                   </div>
                 </div>
               </div>
               <div class="panel panel-primary">
                 <div class="panel-heading">
                     Automatic refreshing (ms)
                 </div>
                 <div class="panel-body">
                   <div class="form-group">
                     <div class="row">
                       <div class="col-md-2">
                         <span class="label label-success">Wallet balances</span>
                         <br/><input type="number" min="0" id="cbx_refresh_wallet" placeholder="10000" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">TXs Activity</span>
                         <br/><input type="number" min="0" id="cbx_refresh_activity" placeholder="10000" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Headers info</span>
                         <br/><input type="number" min="0" id="cbx_refresh_headers" placeholder="1300" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Ping compilers</span>
                         <br/><input type="number" min="0" id="cbx_refresh_compilers" placeholder="20000" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Ping neo-clients</span>
                         <br/><input type="number" min="0" id="cbx_refresh_neocli" placeholder="10000" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">GenesisBlock</span>
                         <br/><input type="number" min="0" step="1" id="cbx_refresh_gen" placeholder="10000" size="7">
                       </div>
                       <div class="col-md-2">
                         <span class="label label-success">Eco metadata</span>
                         <br/><input type="number" min="0" id="cbx_refresh_ecometadata" placeholder="10000" size="7">
                       </div>
                      </div>
                   </div>
                 </div>
               </div>
         </div>
         <!-- END CONFIGURATIONS INFO -->
         <!-- ======================================================== -->

          <!-- ======================================================== -->
          <!-- BEGIN DIV COMPILERS -->
          <div class="tab-pane fade in active" id="compilers">
                    <div class="panel panel-success">
                        <div class="panel-heading">Compile</div>
                        <div class="panel-body">
                            <form id="formCompile" action="/compilex" style="margin-top: 10px;" method="post">
                                      <div class="dropdown btn-group" style="margin-bottom: 10px">
                                        <a class="btn btn-sucess dropdown-toggle" data-toggle="dropdown">
                                            Select Compiler
                                            <span class="caret"></span>
                                        </a>
                                            <ul class="dropdown-menu" id="CompilersList">
                                                <li><a onclick="setCompiler('csharp')">C#</a></li>
                                                <li><a onclick="setCompiler('python')">Python</a></li>
                                                <li><a onclick="setCompiler('golang')">Golang</a></li>
                                                <li><a onclick="setCompiler('java')">Java</a></li>
                                            </ul>
                                      </div>

                                       <div class="dropdown btn-group" style="margin-bottom: 10px">
                                           <a class="btn btn-sucess dropdown-toggle" data-toggle="dropdown">
                                               Select Example
                                               <span class="caret"></span>
                                           </a>
                                           <ul class="dropdown-menu" id="ExampleList">
                                           </ul>
                                       </div>

                                       <input type="hidden" id="code_cs" name="codesend_cs"/>
                                       <input type="hidden" id="code_java" name="codesend_java"/>
                                       <input type="hidden" id="code_golang" name="codesend_golang"/>
                                       <input type="hidden" id="code_python" name="codesend_python"/>

                                       <input type="hidden" id="selected_compiler_form" name="codesend_selected_compiler"/>

                                       <div class="row">
                                           <div class="col-md-4">
                                             <button type="button" onClick="saveSCExample()" id="btnSaveSCExample" class="btn btn-success btn-sm"><i class="fas fa-user-plus"></i> Save Example</button>
                                             <input type="text" id="cbx_example_name" placeholder="myexample.??" size="15"></input>
                                           </div>
                                       </div>
                                       <div class="row">
                                           <div class="col-md-4">
                                             <button type="button" onClick="deleteSCExample()" id="btnDeleteSCExample" class="btn btn-warning btn-sm"><i class="fas fa-user-plus"></i> Delete Example</button>
                                             <button type="button" onClick="deleteAllSCExamples()" id="btnDeleteAllSCExamples" class="btn btn-danger btn-sm"><i class="fas fa-user-plus"></i> Clean All Examples</button>
                                           </div>
                                       </div>
                                       <!-- ACE EDITOR div pre -->
                                       <div class="row">
										   <div class="col-md-12"> 
											   <br />
											 <div  id="smyles_editor_wrap" style="background-color: #cccccc; border-bottom: 1px solid #222222; margin-bottom:11px;">
                                           <div id="aceEditor" style="margin-bottom:0px; height:215px;"></div>
										   <div id="dragbar" style="cursor:row-resize; height: 10px; width:100%;"></div>
											 </div>
                                         </div>
                                       </div>
                                <!-- /////////////////////////////////////////////////////////////////// -->
                                <!-- common submit button -->
                                <!-- <p><font size="1">Use CTRL+ALT+H to access the hotkeys informations</font></p> -->
                                <span id="span_numberCompilations" class="label label-info"></span>
                                <div class="row">
                                  <div class="col-md-2">
                                    <div class="dropdown btn-group" style="margin-bottom: 10px">
                                      <label for="compilers_versions-selection-box">Compiler version:</label>
                                      <select name="compilers_versions" id="compilers_versions-selection-box" class="custom-select form-control"></select>
                                    </div>
                                  </div>
                                  <div class="col-md-2">
                                    <div class="dropdown btn-group" style="margin-bottom: 10px">
                                      <input type="checkbox" id="cbx_compatible" name="cbx_compatible" checked>Compatible</input><br/>
                                    </div>
                                  </div>
                                  <div class="col-md-2">
                                    <div class="dropdown btn-group" style="margin-bottom: 10px">
                                      <input type="checkbox" id="cbx_optimize">Optimize opcodes with <a href="https://github.com/NeoResearch/neo-avm-optimizer" target="_blank">neo-avm-optimizer</a> (BETA! USE WITH CAUTION!)</input>
                                    </div>
                                  </div>
                                </div>
                                <button type="submit" id="compilebtn" style="margin-top: 5px;" class="btn btn-success" data-toggle="modal"><i class="fas fa-hammer"></i> Compile</button>
                                <h4>Compile Warning/Errors:</h4>
                                <!-- end common submit button -->
                                <!-- /////////////////////////////////////////////////////////////////// -->

                                <textarea id="codewarnerr" readonly="readonly" rows="7" cols="100" placeholder="Warning/Errors in code..." class="form-control"></textarea>
                                <h4>AVM (in hex):</h4>
                                <textarea id="codeavm" name="codeavm" readonly="readonly" rows="5" cols="100" placeholder="AVM (in hex)" class="form-control"></textarea>
                                <div class="dropdown btn-group">
                                    <a class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                                        <i class="fas fa-download"></i> AVM
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu" id="downloadMenu">
                                        <li><a onclick="downloadAVM('0')">binary file</a></li>
                                        <li><a onclick="downloadAVM('1')">hex code</a></li>
                                    </ul>
                                </div>
                                <button data-toggle="collapse" data-target="#opcodesDiv" type="button" style="margin-left: 5px; margin-bottom: 5px; margin-top: 5px;" class="btn btn-info" onclick="GetOpcodes()">AVM OPCODES</button><br/>
                                <i class="fas fa-upload"></i> AVM: <input type="file" id="importAVMFile" accept=".avm,.AVM" onchange="ImportAVM()"><br/>
                                <div id="opcodesDiv" class="collapse">
                                    <textarea id="txt_opcodes" readonly="readonly" rows="5" cols="100" placeholder="Listing AVM OpCodes" class="form-control"></textarea>
                                    <button id="btn_downloadOpCode" style="margin-bottom: 5px; margin-top: 5px;" class="btn btn-warning"><i class="fas fa-download"></i> OpCodes</button>
                                </div>
                                <h4>Compiled contract info:</h4>
                                <button type="button" onClick="addContractToWallet($('#contractInfo_ScriptHash').val())" id="btnNewContractWallet" class="btn btn-success btn-sm"><i class="fas fa-user-plus"></i> Add to wallet</button><br>
                                <label for="contractInfo_ScriptHash">ScriptHash</label>
                                <input id="contractInfo_ScriptHash" readonly="readonly" name="contractInfo_ScriptHash" class="form-control" placeholder="Script Hash" style="width: 100%; margin-bottom: 10px;"/>
                                <label for="contractInfo_Address">Address</label>
                                <input id="contractInfo_Address" readonly="readonly" name="contractInfo_Address" class="form-control" placeholder="Address (base58)" style="width: 100%; margin-bottom: 10px;"/>
                                <label for="contractInfo_AVMSize">AVM size (in bytes)</label>
                                <input id="contractInfo_AVMSize" readonly="readonly" name="contractInfo_AVMSize" class="form-control" placeholder="AVM size (in bytes)" style="width: 100%; margin-bottom: 10px;"/>

                                <h4>ABI:</h4>
                                <textarea id="codeabi" readonly="readonly" rows="5" cols="100" placeholder="ABI (JSON format)" class="form-control"></textarea>
                            </form> <!-- id="formCompile" -->
                            <!-- end of compilex form -->
                            <!-- /////////////////////////////////////////////////////////////////// -->
                        </div>
                    </div>
          </div>
          <!-- end compilers -->
        <!-- begin activity -->
        <div class="tab-pane fade" id="activity">
          <div class="panel panel-info" id="divNetworkRelayed">
              <div class="panel-heading">Historical Relayed TX's
                   <button type="submit" onClick="searchForTXs()" id="btndrawRelayedTXs" style="margin-bottom: 5px;" class="btn btn-info btn-sm"> <i class="fas fa-sync-alt"></i></button>
              </div>
              <div class="panel-body">
                  <div class="row">
                      <div class="col-md-2">
                        <span for="cbx_fullHistory" type="checkbox" class="label label-success">Enable full activity history</span>
                        <input type="checkbox" id="cbx_fullHistory"></input>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md-12">
                        <div id="divRelayedTXs" class="table-responsive"></div>
                      </div>
                  </div>
                  <div class="row">
                        <div class="col-md-2">
                          <button onClick="moveLastTab()" id="btnActivityMoveBackLastTab" class="btn btn-info btn-sm"><i class="fas fa-backward"></i> Deploy&Invoke </button>
                        </div>
                        <div class="col-md-2">
                          <button type="submit" onClick="exportHistory()" id="btnExportHistory" style="margin-bottom: 5px;" class="btn btn-warning btn-sm"><i class="fas fa-file-download"></i><font size='1'> DOWNLOAD</font></button><br>
                        </div>
                        <div class="col-md-2">
                          <span class="label label-info"><i class="fas fa-file-upload"></i> UPLOAD</span>
                          <input type="file" id="importActivityFile" accept=".json,.JSON" onchange="ImportHistoricalActivityJSON()">
                        </div>
                        <div class="col-md-2">
                          <button type="submit" onClick="searchForTXs()" id="btnGenerateTXsReport" style="margin-bottom: 5px;" class="btn btn-info btn-sm"><i class="fas fa-table"></i><font size='1'> Generate TX's Report (TODO)</font></button>
                        </div>
                   </div>
                  <span type="checkbox" class="label label-success">Open Replay TX's Tools</span>
                  <input type="checkbox" data-toggle="collapse" data-target="#replayTXsDiv" onClick="openReplayToolsTXs()" id="btnReplayTXsTools"></input><br>
                  <div id="replayTXsDiv" class="collapse">
                      <textarea id="txt_replayOrder" readonly="readonly" rows="5" cols="100" placeholder="Order to replay" class="form-control"></textarea>
                      <div class="col-md-2">
                        <span for="cbx_disableHistory" type="checkbox" class="label label-success">Disable activity history</span>
                        <input type="checkbox" id="cbx_disableHistory"></input>
                      </div>
                      <div class="col-md-2">
                        <span for="cbx_disableAutomaticClaim" type="checkbox" class="label label-success">Disable automatic claims</span>
                        <input type="checkbox" id="cbx_disableAutomaticClaim"></input>
                      </div>
                      <button id="btnReplayTXs" onClick="replayTXs()" style="margin-bottom: 5px; margin-top: 5px;" class="btn btn-primary btn-sm">Replay all TXs</button>
                  </div>
              </div>
          </div>
        </div>
        <!-- end activity -->

        <!-- begin network -->
        <div class="tab-pane fade" id="network">

          <div class="panel panel-primary" id="divNetworkDeploy">
              <div class="panel-heading">Deploy contract into the Blockchain</div>
              <div class="panel-body">

                <div class="tab-container">
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-target="#tabdeployjs" data-toggle="tab">Deploy via neon-js</a></li>
                    </ul>

                    <div class="tab-content">

                      <!-- begin deploy js -->
                      <div class="tab-pane active cont" id="tabdeployjs">
                        <form id="formdeployjs" method="post">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="contracthash">Contract ScriptHash</label>
                                  <input id="contracthashjs" name="contracthash" class="form-control" placeholder="Script Hash" style="width: 100%; margin-bottom: 10px;"/>
                                </div>
                              </div>

                              <div class="col-md-3">
                                <div class="form-group">
                                  <label for="contractparams">Deploy Params</label>
                                  <input id="contractparamsjs" name="contractparams" value='' class="form-control" placeholder="Parameters (without quotes)" style="width: 100%">
                                </div>
                              </div>
                              <div class="col-md-3">
                                 <label for="contractparamnames">Param Type Names</label>
                                 <input id="contractparamnamesjs" name="contractparamnames" value='' class="form-control" placeholder="Parameters (without quotes)" style="width: 100%" disabled>
                              </div>

                              <div class="col-md-6 form-inline" style="margin-bottom: 10px">
                                <div class="form-group">
                                  <select name="contractreturn" id="contractreturnjs" class="custom-select form-control" data-toggle="tooltip" data-placement="top" title="Signature (00), Boolean (01), Integer (02), Hash160 (03), Hash256 (04), ByteArray (05), PublicKey (06), String (07), Array (10), InteropInterface (f0), Void (ff).">
                                    <option title="00 - Signature" value="00">00 - Signature</option>
                                    <option title="01 - Boolean" value="01">01 - Boolean</option>
                                    <option title="02 - Integer" value="02">02 - Integer</option>
                                    <option title="03 - Hash160" value="03">03 - Hash160</option>
                                    <option title="04 - Hash256" value="04">04 - Hash256</option>
                                    <option title="05 - ByteArray" value="05">05 - ByteArray</option>
                                    <option title="06 - PublicKey" value="06">06 - PublicKey</option>
                                    <option title="07 - String" value="07">07 - String</option>
                                    <option title="10 - Array" value="10">10 - Array</option>
                                    <option title="f0 - InteropInterface" value="f0">f0 - InteropInterface</option>
                                    <option title="ff - Void" value="ff">ff - Void</option>
                                  </select>
                                </div>

                                <div class="form-group" style="margin-right: 8px">
                                  <div class="checkbox">
                                    <label>
                                      <input type="checkbox" checked name="cbx_storage" id="cbx_storagejs" /> Storage
                                    </label>
                                  </div>
                                </div>
                                <div class="form-group" style="margin-right: 8px">
                                  <div class="checkbox">
                                    <label>
                                      <input type="checkbox" checked name="cbx_dynamicinvoke" id="cbx_dynamicinvokejs"/> Dynamic Invoke
                                    </label>
                                  </div>
                                </div>
                                <div class="form-group" style="margin-right: 8px">
                                  <div class="checkbox">
                                    <label>
                                      <input type="checkbox" name="cbx_ispayable" id="cbx_ispayablejs"/> IsPayable
                                    </label>
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-3">
                                 <label for="contractparamnames">Contract Name</label>
                                 <input id="jsdeploy_name" name="jsdeploy_name" value='appname' class="form-control" placeholder="" style="width: 100%"/>
                              </div>
                              <div class="col-md-3">
                                 <label for="contractparamnames">Contract Author</label>
                                 <input id="jsdeploy_author" name="jsdeploy_author" value='author' class="form-control" placeholder="" style="width: 100%"/>
                              </div>
                              <div class="col-md-6">
                                 <label for="contractparamnames">Contract Description</label>
                                 <input id="jsdeploy_desc" name="jsdeploy_desc" value='appdescription' class="form-control" placeholder="" style="width: 100%"/>
                              </div>
                              <div class="col-md-3">
                                 <label for="contractparamnames">Contract e-mail</label>
                                 <input id="jsdeploy_email" name="jsdeploy_email" value='email' class="form-control" placeholder="" style="width: 100%"/>
                              </div>
                              <div class="col-md-3">
                                 <label for="contractparamnames">Contract version</label>
                                 <input id="jsdeploy_version" name="jsdeploy_version" value='v1.0' class="form-control" placeholder="" style="width: 100%"/>
                              </div>

                              <div class="col-md-3">
                                  <div class="form-group">
                                    <label>Caller (AddressBase58)</label>
                                    <select name="wallet_deployjs" id="wallet_deployjs" class="custom-select form-control"></select>
                                  </div>
                              </div>

                              <div class="col-md-3">
                                <div class="form-group">
                                  <label for="attachDeployGasFeeJS">Network fee (in GAS)</label>
                                  <input type="number" min="0" step="0.00000001" id="attachDeployGasFeeJS" name="attachDeployGasFeeJS" class="form-control" value="0" placeholder="Send GAS NetFee"/>
                                </div>
                              </div>

                              <div class="col-md-12">
                                <button type="submit" id="deploybtnjs" class="btn btn-success btn-sm" data-toggle="modal" ><i class="fas fa-archive"></i> Deploy</button>
                              </div>
                              <div class="col-md-12">
                                <span id="span_numberDeploys" class="label label-info"></span>
                              </div>



                            </div>
                        </form>
                      </div> <!-- end panel deploy js -->

                    </div> <!-- end content  -->
                  </div>  <!-- end containers -->
              </div> <!-- end body -->
          </div> <!-- warning -->

          <div class="panel panel-primary" id="divNetworkInvoke">
              <div class="panel-heading">Interacting with a Smart Contract - Invoke</div>
                <div class="panel-body">

                <div class="tab-container">
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-target="#tabinvokejs" data-toggle="tab">Invoke via neon-js</a></li>
                    </ul>
                  <div class="tab-content">
                    <!-- begin invokejs -->
                    <div class="tab-pane active cont" id="tabinvokejs">
                     <form id="forminvokejs" method="post">

                      <div class="row">
                      <div class="col-md-6"> <!-- LEFT SIDE OF INVOKE BOX -->
                       <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                             <label for="invokehashjs">Contract ScriptHash</label>
                             <input id="invokehashjs" name="invokehashjs" class="form-control" placeholder="Script Hash" style="width: 100%; margin-bottom: 10px;"/>
                           </div>
                         </div>
                       </div>

                       <div class="row">
                           <div class="col-md-6">
                             <div class="form-group">
                                 <label for="attachSystemgasjs">System fee (GAS) </label>
                                 <input id="attachSystemgasjs" type="number" min="0" step="0.00000001" name="attachSystemgasjs" class="form-control"  value="0" placeholder="Send GAS Sys"/>
                             </div>
                           </div>
                           <div class="col-md-6">
                             <div class="form-group">
                                 <label for="attachgasfeejs">Network fee (GAS)</label>
                                 <input id="attachgasfeejs" type="number" min="0" step="0.00000001" name="attachgasfeejs" class="form-control" value="0" placeholder="Send GAS NetFee"/>
                             </div>
                           </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6">
                              <div class="form-group">
                                <label for="attachneojs">Attach NEO</label>
                                <input id="attachneojs" type="number" min="0" step="0.00000001" name="attachneojs" class="form-control" value="0" placeholder="Attach NEO"/>
                              </div>
                          </div>
                          <div class="col-md-6">
                              <div class="form-group">
                                  <label for="attachgas">Attach GAS</label>
                                  <input id="attachgasjs" type="number" min="0" step="0.00000001" name="attachgasjs" class="form-control" value="0" placeholder="Attach GAS"/>
                              </div>
                          </div>
                        </div>
                      </div> <!-- LEFT col6 -->
                      <div class="col-md-6"> <!-- RIGHT SIDE OF INVOKE BOX -->
                        <div class="form-group">
                          <label for="invokeparamsjs">Invoke Parameters (JSON)</label><br/>
                          <textarea id="invokeparamsjs" name="invokeparamsjs" rows="5" style="width: 100%; margin-bottom: 10px;"></textarea>
                        </div>
                      </div>  <!-- RIGHT col6 -->
                    </div> <!-- finish row LEFT/RIGHT -->

                        <div class="row">
                                 <div class="col-md-3">
                                   <div class="form-group">
                                     <label for="invokefunctionjs">Function to Invoke</label> <input type="checkbox" id="cbx_usearray_js" checked onchange="updateArrayInvokeParamsJs()"/> use param array<br/>
                                     <select id="invokefunctionjs" class="custom-select form-control" onchange="updateInvokeParamsJs()">
                                         <option>Main</option>
                                     </select>
                                   </div>
                                 </div>
                                 <!-- Param 1 -->
                                 <div class="col-md-1">
                                   <div class="form-group">
                                     <label>Type</label>
                                     <select id="invokeparamjsbox1" class="custom-select form-control" onchange="updateInvokeParamsJs()">
                                         <option>None</option>
                                         <option>String</option>
                                         <option>Address</option>
                                         <option>Hex</option>
                                         <option>Integer</option> <!-- big integer -->
                                         <option>DecFixed8</option> <!-- fixed8 in decimal format -->
                                     </select>
                                   </div>
                                 </div>
                                 <div class="col-md-2">
                                   <div class="form-group">
                                     <label>Param 1: </label> <input type="checkbox" id="cbx_inarray_js1" checked onchange="updateInvokeParamsJs()"/> in array<br/>
                                     <input id="invokeparamsjs1" class="form-control" value='' placeholder="Script Param 1" oninput="updateInvokeParamsJs()"/>
                                   </div>
                                 </div>
                                 <!-- Param 2 -->
                                 <div class="col-md-1">
                                   <div class="form-group">
                                     <label>Type</label>
                                     <select id="invokeparamjsbox2" class="custom-select form-control" onchange="updateInvokeParamsJs()">
                                         <option>None</option>
                                         <option>String</option>
                                         <option>Address</option>
                                         <option>Hex</option>
                                         <option>Integer</option> <!-- big integer -->
                                         <option>DecFixed8</option> <!-- fixed8 in decimal format -->
                                     </select>
                                   </div>
                                 </div>
                                 <div class="col-md-2">
                                   <div class="form-group">
                                     <label>Param 2</label> <input type="checkbox" id="cbx_inarray_js2" checked onchange="updateInvokeParamsJs()"/> in array<br/>
                                     <input id="invokeparamsjs2" class="form-control" value='' placeholder="Script Param 2" oninput="updateInvokeParamsJs()"/>
                                   </div>
                                 </div>
                                 <!-- Param 3 -->
                                 <div class="col-md-1">
                                   <div class="form-group">
                                     <label>Type</label>
                                     <select id="invokeparamjsbox3" class="custom-select form-control" onchange="updateInvokeParamsJs()">
                                         <option>None</option>
                                         <option>String</option>
                                         <option>Address</option>
                                         <option>Hex</option>
                                         <option>Integer</option> <!-- big integer -->
                                         <option>DecFixed8</option> <!-- fixed8 in decimal format -->
                                     </select>
                                   </div>
                                 </div>
                                 <div class="col-md-2">
                                   <div class="form-group">
                                     <label>Param 3</label> <input type="checkbox" id="cbx_inarray_js3" checked onchange="updateInvokeParamsJs()"/> in array<br/>
                                     <input id="invokeparamsjs3" class="form-control" value='' placeholder="Script Param 3" oninput="updateInvokeParamsJs()"/>
                                   </div>
                                 </div>
                           </div> <!-- row -->
                           <div class="row">
                              <div class="col-md-3">
                               <div class="form-group">
                                 <label>Caller (AddressBase58)</label>
                                 <select name="wallet_invokejs" id="wallet_invokejs" class="custom-select form-control"></select>
                               </div>
                              </div>
                              <div class="col-md-3">
                                <span class="label label-info"><i class="fas fa-file-upload"></i> UPLOAD ABI</span>
                                <input type="file" id="importABIFile" accept=".json,.JSON" onchange="ImportABIFromFile()">
                              </div>
                           </div>
                           <div class="row">
                               <div class="col-md-2">
                                 <button type="submit" id="invokebtn" class="btn btn-success btn-sm" data-toggle="modal"><i class="fas fa-fire"></i> Invoke</button>
                               </div>
                               <div class="col-md-2">
                                 <div class="form-group">
                                   <span type="checkbox" class="label label-success">Advancing signing</span>
                                   <input type="checkbox" data-toggle="collapse" data-target="#divAdvancedSigning" id="cbxAdvSignToggle"></input><br>
                                  </div>
                               </div>
                               <div class="col-md-2">
                                 <span id="span_numberInvokes" class="label label-info"></span>
                               </div>
                           </div> <!-- row -->
                     </form>
                   </div> <!-- end invokejs -->
               </div> <!-- tab-content -->
              </div> <!-- tab-container -->
            </div> <!-- body -->
          </div> <!-- panel warning -->

          <div class="panel panel-info collapse" id="divAdvancedSigning">
              <div class="panel-heading">Advanced signing
              </div>
              <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                      <label for="tx_AdvancedSigning_ScriptHash">ScriptHash</label>
                      <input id="tx_AdvancedSigning_ScriptHash" readonly="readonly" name="tx_AdvancedSigning_ScriptHash" class="form-control" placeholder="TX Script Hash" style="width: 100%; margin-bottom: 10px;"/>
                      <label for="tx_AdvancedSigning_HeaderSize">TX Header Size</label>
                      <input id="tx_AdvancedSigning_HeaderSize" readonly="readonly" name="tx_AdvancedSigning_HeaderSize" class="form-control" placeholder="TX Size (in bytes)" style="width: 100%; margin-bottom: 10px;"/>
                      <label for="tx_AdvancedSigning_Size">TX Size</label>
                      <input id="tx_AdvancedSigning_Size" readonly="readonly" name="tx_AdvancedSigning_Size" class="form-control" placeholder="TX Size (in bytes)" style="width: 100%; margin-bottom: 10px;"/>
                    </div>
                    <div class="col-md-6">
                      <label for="txScript_advanced_signing">Transaction Header</label>
                      <textarea id="txScript_advanced_signing" readonly="readonly" rows="5" cols="100" placeholder="TX script" class="form-control"></textarea>
                    </div>
                </div> <!-- row -->
                <div class="row">
                    <div class="col-md-6">
                      <select required multiple onchange="addAttributedAndTryToSign()" name="wallet_advanced_signing" id="wallet_advanced_signing" class="custom-select form-control" size="7"></select>
                    </div>
                    <div class="col-md-6">
                      <label for="txtAdvancedSigning">Scripts - Witness (json)</label>
                      <textarea onchange="addScriptsToPendingTx()" id="txt_AdvancedSigning_Signatures" rows="5" cols="100" class="form-control" placeholder="Signature1 \n Signature2 \n SignatureN"/>
                    </div>
                </div> <!-- row -->
                <div class="row">
                    <div class="col-md-2">
                      <button type="submit" onclick="sendRawTXFromPendingTx()" id="sendRawTxBtn" class="btn btn-success btn-sm"><i class="fas fa-fire"></i> Send</button>
                    </div>
                </div> <!-- row -->
              </div>
          </div>

        </div>
        <!-- end deploy invoke -->

        <!-- begin rawRPC -->
        <div class="tab-pane fade" id="rawRPC">
          <div class="panel panel-primary" id="divFormJsonOut">
              <div class="panel-heading">Invoke neo nodes (JSON RPC)</div>
              <div class="panel-body">
                  <form id="frmRPCJson" action="">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="rpcMethod">Method (view <a href="https://docs.neo.org/en-us/node/cli/apigen.html" target="_blank">Official API</a> or put cursor on top for tooltip)</label>
                          <select name="rpcMethod" id="rpcMethod" class="custom-select form-control" onchange="frmRPCJson()">
                            <option title="select">Select a method</option>
                            <option title=":Gets the number of blocks in the main chain">getblockcount</option>
                            <option title="<address> :	Export the private key of the specified address (Need to open the wallet)">dumpprivkey</option>
                            <option title="<address> :	Check account asset information according to account address">getaccountstate</option>
                            <option title="<txid>[verbose=0]: Returns the contract log based on the specified txid (Need to enable logging plugin)">getapplicationlog</option>
                            <option title="<asset_id> :	Query asset information according to the specified asset number">getassetstate</option>
                            <option title="<asset_id> : Returns the balance of the corresponding asset in the wallet according to the specified asset number (Need to open the wallet)">getbalance</option>
                            <option title=": Gets the hash of the tallest block in the main chain">getbestblockhash</option>
                            <option title="<hash> [verbose=0]:	Returns the corresponding block information according to the specified hash value">getblock</option>
                            <option title="<index> [verbose=0]: 	Returns the corresponding block information according to the specified index">getblock</option>
                            <option title="<index>: 	Returns the hash value of the corresponding block based on the specified index">getblockhash</option>
                            <option title="<index>: 	Returns the system fees before the block according to the specified index">getblocksysfee</option>
                            <option title=": Gets the current number of connections for the node">getconnectioncount</option>
                            <option title="<script_hash>: 	Returns information about the contract based on the specified script hash">getcontractstate</option>
                            <option title=": Create a new address (Need to open the wallet)">getnewaddress</option>
                            <option title="<number_of_blocks> <height_to_end (optional)> Return block timestamps (Need to enable CoreMetrics plugin)">getmetricblocktimestamp</option>
                            <option title=": Get a list of unconfirmed transactions in memory">getrawmempool</option>
                            <option title="<txid> [verbose=0]: 	Returns the corresponding transaction information based on the specified hash value">getrawtransaction</option>
                            <option title="<script_hash> <key>: 	Returns the stored value based on the contract script hash and key">getstorage</option>
                            <option title="<txid>: 	Returns the corresponding transaction height information based on the specified txid">gettransactionheight</option>
                            <option title="<txid> <n>: 	Returns the corresponding transaction output (change) information based on the specified hash and index">gettxout</option>
                            <option title=": Get a list of nodes that are currently connected/disconnected by this node">getpeers</option>
                            <option title=": Returns the current NEO consensus nodes information and voting status.">getvalidators</option>
                            <option title=": Get version information of this node">getversion</option>
                            <option title="<script_hash> <params>:	Invokes a smart contract at specified script hash with the given parameters">invoke</option>
                            <option title="<script_hash> <operation> <params>:	Invokes a smart contract at specified script hash, passing in an operation and its params">invokefunction</option>
                            <option title="<script>: 	Runs a script through the virtual machine and returns the results">invokescript</option>
                            <option title=": Lists all the addresses in the current wallet (Need to open the wallet)">listaddress</option>
                            <option title=": Lists all the plugins loaded in the RPC node">listplugins</option>
                            <option title="<hex>: 	Broadcast a transaction over the network. See the network protocol documentation.">sendrawtransaction</option>
                            <option title="<asset_id> <address> <value> [fee=0]: 	Transfer to specified address (Need to open the wallet)">sendtoaddress</option>
                            <option title="<outputs_array> [fee=0] [change_address]: 	Bulk transfer order (Need to open the wallet)">sendmany</option>
                            <option title="<hex>: 	Submit new blocks (Needs to be a consensus node)">submitblock</option>
                            <option title="<address>:	Verify that the address is a correct NEO address 	">validateaddress</option>
                            <option title=": create your invoke function manually!"></option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="txtRPCJson">RPC Json Model</label>
                          <textarea id="txtRPCJson" rows="1" cols="100" class="form-control"/>
                        </div>
                      </div>
                    </div>
                  </form>
                  <form id="frmRPCJson2" action="">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="txtRPCJsonOut">Output RPC</label>
                          <textarea id="txtRPCJsonOut" rows="10" cols="100" class="form-control" readonly/>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <button type="submit" id="btnCallJsonRPC"class="btn btn-success btn-sm"><i class="fas fa-phone"></i></button>
                        <button type="button" style="margin-left: 5px; margin-bottom: 5px; margin-top: 5px;" class="btn btn-info btn-sm" onclick="ConvertJsonNotifications()"><i class="fas fa-exchange-alt"></i> Notifications</button>
                      </div>
                    </div>
                  </form>
                  <div id="divAppLogNotifications">
                      <textarea id="txt_notifications" readonly="readonly" rows="5" cols="100" placeholder="Listing Notifications"></textarea>
                  </div>
              </div>
          </div>
        </div>
        <!-- end rawRPC -->

      </div> <!-- TAB PANNEL -->
      <!-- END DIV MAIN CONTENTS - EVERYTHING WAS INSIDE HERE - II-->
      <!-- ======================================================== -->
      <!-- ======================================================== -->

  </div> <!-- end col -->
  <!-- END DIV MAIN CONTENTS - EVERYTHING WAS INSIDE HERE - I -->
  <!-- ======================================================== -->
  <!-- ======================================================== -->

  </div> <!-- end row -->
  <!-- BEGIN DIV MAIN CONTENTS - MENU AND CONTENT -->
  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- ======================================================== -->


    <script>
    drawRelayedTXs();
    window.onbeforeunload = function(event) {
        storePageData();
        //socket.disconnect();
        return confirm("Confirm refresh");
    }

    //Check current webpage and starts with localhost or neocompiler public website
    $(document).ready(function() {
        recoveringPageData();
        //Function that verifies if page is localhost or neocompiler.io, changing neocli node and calling paths
        if (window.location.href.indexOf("localhost") != -1) {
            $("#ecolabnetworkurlselection")[0].selectedIndex = 1;
        }
        updatePATHS();
        //This should be after Paths update
        automaticNeoCliNodeSelection();
        updateAllWalletData();
        updateEcoMetadataInfo();

        //The first call is done here as default
        $("#compilebtn")[0].disabled = true;
        updateCompilersSelectionBox("docker-mono-neo-compiler");

		aceEditor = createEditor("aceEditor", "ace/mode/csharp");
		var dragging = false;
		var wpoffset = 0;
		$( '#dragbar' ).mousedown( function ( e ) {
			e.preventDefault();
			window.dragging = true;
			var smyles_editor = $( '#aceEditor' );
			var top_offset = smyles_editor.offset().top - wpoffset;
			// Set editor opacity to 0 to make transparent so our wrapper div shows
			smyles_editor.css( 'opacity', 0 );
			// handle mouse movement
			$( document ).mousemove( function ( e ) {
				var actualY = e.pageY - wpoffset;
				// editor height
				var eheight = actualY - top_offset;
				// Set wrapper height
				$( '#smyles_editor_wrap' ).css( 'height', eheight);
				// Set dragbar opacity while dragging (set to 0 to not show)
				$( '#dragbar' ).css( 'opacity', 0.15 );
			} );
		} );

		$( document ).mouseup( function ( e ) {
			if ( window.dragging )
			{
				var smyles_editor = $( '#aceEditor' );
				var actualY = e.pageY - wpoffset;
				var top_offset = smyles_editor.offset().top - wpoffset;
				var eheight = actualY - top_offset;
				$( document ).unbind( 'mousemove' );
				// Set dragbar opacity back to 1
				$( '#dragbar' ).css( 'opacity', 1 );
				// Set height on actual editor element, and opacity back to 1
				smyles_editor.css( 'height', eheight ).css( 'opacity', 1 );
				// Trigger ace editor resize()
				aceEditor.resize();
				window.dragging = false;
			}
		} );
        setCompiler("csharp");
    });

    function createEditor(name, mode) {
        var editor = ace.edit(name);
        editor.setTheme("ace/theme/clouds");
        editor.session.setMode(mode);
        editor.setAutoScrollEditorIntoView(true);
        editor.setOptions({
            enableBasicAutocompletion: true,
            enableSnippets: true,
            enableLiveAutocompletion: false,
        });
        editor.commands.addCommand({
            name: "showKeyboardShortcuts",
            bindKey: {
                win: "Ctrl-Alt-h",
                mac: "Command-Alt-h"
            },
            exec: function(editor) {
                ace.config.loadModule("ace/ext/keybinding_menu", function(module) {
                    module.init(editor);
                    //editor.showKeyboardShortcuts() just shows when tigger the hotkey
                })
            }
        })
        return editor
    }
    //===============================================================

    function setWalletRefreshInterval(intervalForRefreshing)
    {
      if(refreshIntervalWalletId!=0)
        clearInterval(refreshIntervalWalletId);
      $("#cbx_refresh_wallet").val(intervalForRefreshing);

      refreshIntervalWalletId = setInterval(function() {
          populateAllWalletData();
          stopRefreshingDueToConnectionProblems();
      }, intervalForRefreshing);
    }

    function setActivityRefreshInterval(intervalForRefreshing)
    {
      if(refreshIntervalActivityId!=0)
        clearInterval(refreshIntervalActivityId);
      $("#cbx_refresh_activity").val(intervalForRefreshing);

      refreshIntervalActivityId = setInterval(function() {
          searchForTXs();
      }, intervalForRefreshing);
    }

    function setEcoInfoRefreshInterval(intervalForRefreshing)
    {
      if(refreshIntervalEcoMetadataStatsId!=0)
        clearInterval(refreshIntervalEcoMetadataStatsId);
      $("#cbx_refresh_ecometadata").val(intervalForRefreshing);

      refreshIntervalEcoMetadataStatsId = setInterval(function() {
          updateEcoMetadataInfo();
      }, intervalForRefreshing);
    }

    function setCompilersByPing(intervalForRefreshing)
    {
      if(refreshIntervalCompilers!=0)
        clearInterval(refreshIntervalCompilers);
      $("#cbx_refresh_compilers").val(intervalForRefreshing);

      refreshIntervalCompilers = setInterval(function() {
          pingCompilers();
      }, intervalForRefreshing);
    }

    function setIntervalAutomaticNeoCliNodeWithRandomSample(intervalForRefreshing)
    {
      if(refreshIntervalNeoCliNodes!=0)
        clearInterval(refreshIntervalNeoCliNodes);
      $("#cbx_refresh_neocli").val(intervalForRefreshing);

      refreshIntervalNeoCliNodes = setInterval(function() {
          automaticNeoCliNodeSelection();
          // Automatic node selection may also find a good node
          stopRefreshingDueToConnectionProblems();
      }, intervalForRefreshing);
    }

    function setGenesisBlock(intervalForRefreshing)
    {
      if(refreshGenesisBlock!=0)
        clearInterval(refreshGenesisBlock);
      $("#cbx_refresh_gen").val(intervalForRefreshing);

      refreshGenesisBlock = setInterval(function() {
          genesisBlockTransfer("AZ81H31DMWzbSnFDLFkzh9vHwaDLayV7fU", "AK2nJJpJr6o664CWJKi1QRXjqeic2zRp8y");
      }, intervalForRefreshing);
    }

    function updateEcoMetadataInfo() {
        //$("#span_numberCompilations")[0].innerHTML = "Total compile calls: " + numberCompilations;
        //$("#span_numberDeploys")[0].innerHTML = "Total deploy calls: " + numberDeploys;
        //$("#span_numberInvokes")[0].innerHTML = "Total invoke calls: " + numberInvokes;
        $("#span_numberCompilations")[0].innerHTML = "";
        $("#span_numberDeploys")[0].innerHTML = "";
        $("#span_numberInvokes")[0].innerHTML = "";
    }

    function updateAutomaticNodeSelectionFlag() {
        if ($("#cbx_automatic_node_best_height")[0].checked) {
            AUTOMATIC_PIC_CSHARP_NODE_BEST_HEGITH = true;
        } else {
            AUTOMATIC_PIC_CSHARP_NODE_BEST_HEGITH = false;
        }
    }

    function pingCompilers() {
        if ($("#cbx_automatic_compiler")[0].checked) {
            var availableCompilers = $("#selectionBoxCompilers")[0].length;
            var bestCompiler = $("#selectionBoxCompilers")[0][0].value;
            var bestPing = 1000000000;
            for (var i = 0; i < availableCompilers; i++) {
                var compilerToPing = $("#selectionBoxCompilers")[0][i].value;

                //console.log('Going to ping ' + compilerToPing + '...');
                ping(compilerToPing).then(function(response) {
                    //console.log('Ping time was ' + String(response.delta) + ' ms');
                    if (response.delta < bestPing) {
                        bestPing = response.delta;
                        bestCompiler = response.url;
                        if (bestCompiler != BASE_PATH_COMPILERS) {
                            //console.log('Going to update to bestCompiler ' + bestCompiler + " with ping time " + String(response.delta));
                            updateAllCompilerRelatedVariables(bestCompiler);
                        }
                    }
                    //console.log('bestCompiler ' + bestCompiler + ' with ' + bestPing + 'ms');
                }).catch(function(err) {
                    console.error('Could not ping remote URL', err);
                });
            }
        } //automatic compiler checkbox
    }

    //=============================================================
    //======== BEGIN ON CHANGE FUNCTIONS ================================
    $("#cbx_fullHistory").on('change', function() {
        if ($("#cbx_fullHistory")[0].checked) {
            FULL_ACTIVITY_HISTORY = true;
        } else {
            FULL_ACTIVITY_HISTORY = false;
        }
        //console.log("New FULL_ACTIVITY_HISTORY flag is " + FULL_ACTIVITY_HISTORY);
    });

    $("#cbx_disableHistory").on('change', function() {
        if ($("#cbx_disableHistory")[0].checked) {
            DISABLE_ACTIVITY_HISTORY = true;
        } else {
            DISABLE_ACTIVITY_HISTORY = false;
        }
    });

    $("#cbx_disableAutomaticClaim").on('change', function() {
        if ($("#cbx_disableAutomaticClaim")[0].checked) {
            DISABLE_AUTOMATIC_CLAIM = true;
        } else {
            DISABLE_AUTOMATIC_CLAIM = false;
        }
    });
    //=================================================================
    //Neoscan selection box on loading
    /*if (ENABLE_NEOSCAN_TRACKING) {
        $("#cbx_enable_neoscan")[0].checked = true;
    } else {
        $("#cbx_enable_neoscan")[0].checked = false;
    }*/

    //onchange
    $("#cbx_enable_neoscan").on('change', function() {
        if ($("#cbx_enable_neoscan")[0].checked) {
            ENABLE_NEOSCAN_TRACKING = true;
        } else {
            ENABLE_NEOSCAN_TRACKING = false;
        }
        updateNeoScanLinkIfEnable();
        drawRelayedTXs();
        console.log("New ENABLE_NEOSCAN_TRACKING flag is " + ENABLE_NEOSCAN_TRACKING);
    });
    //=================================================================

    $("#ecolabnetworkurlselection").on('change', function() {
        updatePATHS();
    });

    $("#ecolabproviderselection").on('change', function() {
		switch($("#ecolabproviderselection").val()){
			case "NeoCompiler-Eco":
				window.provider = null;
				break;
			case "O3":
				window.provider = window.neoDapi;
				break;
			case "NeoLogin":
				window.provider = window.neologin;
				break;
			case "NeoLine":
				window.provider = window.neoline;
				break;
		}
		for(const providerCandidate of ["neoDapi", "neologin", "neoline"]){
			if(window[providerCandidate]){
				window[providerCandidate].removeEventListener("ACCOUNT_CHANGED");
			}
		}
		if($("#ecolabproviderselection").val() === "NeoCompiler-Eco"){
			changeAccount(window.storedECO_WALLET);
		} else {
			window.provider.getAccount()
				.then(createProviderECO_WALLET);
			window.provider.addEventListener("ACCOUNT_CHANGED", createProviderECO_WALLET);
		}

		function createProviderECO_WALLET(providerAccount){
			changeAccount([{
				account: new Neon.wallet.Account(providerAccount.address),
				print: true
			}]);
		}
		function changeAccount(newAccounts){
      // Cancel genesisBlock
      clearInterval(refreshGenesisBlock);

      ECO_WALLET = newAccounts;
			updateAllWalletData(false);
		}
    });

    $("#createtx_input_utxo2").on('change', function() {
        console.log("input UTXO tx ID is: " + JSON.parse($("#createtx_input_utxo2").val()).txid);
    });

    /*
            $("#createtx_input_assetid").on('change', function() {
                verifyRPCNetworkForWithdrawUTXO();
            });
    */
    //$("#createtx_selRPCNetwork").on('change', function() {
    //    verifyRPCNetworkForWithdrawUTXO();
    //});

    /*
      $("#createtx_input_utxo").on('change', function() {
        inputbox = document.getElementById("createtx_input_utxo");
        value = inputbox.options[inputbox.selectedIndex].value;
        $("#createtx_input_utxo_value")[0].value = value;
        $("#createtx_output_values").val($("#createtx_input_utxo_value")[0].value+"\n");
        updateOutputValues();
      })
    */

    //=============================================================
    //======== BEGIN CONFIGUCATION SELECTION BOX ON CHANGE ========
    function updateAllCompilerRelatedVariables(url) {
        BASE_PATH_COMPILERS = url;
        $("#compilers_path")[0].value = url;

        updateCompilersSelectionBox("docker-mono-neo-compiler");
    }

    $("#selectionBoxCompilers").on('change', function() {
        updateAllCompilerRelatedVariables(this.value);
    });

    $("#selectionBoxEcoServices").on('change', function() {
        BASE_PATH_ECOSERVICES = this.value;
        $("#eco_services_path")[0].value = this.value;
    });

    $("#selectionBoxRPCNodes").on('change', function() {
        BASE_PATH_CLI = this.value;
        $("#rpc_nodes_path")[0].value = this.value;
    });

    $("#selectionBoxNeoScan").on('change', function() {
        BASE_PATH_NEOSCAN = this.value;
        $("#neoscan_path")[0].value = this.value;
    });

    $("#cbx_refresh_wallet").on('change', function() {
        setWalletRefreshInterval(this.value);
    });
    $("#cbx_refresh_activity").on('change', function() {
        setActivityRefreshInterval(this.value);
    });
    $("#cbx_refresh_headers").on('change', function() {
        setRefreshingIntervalForHeadersInfo(this.value);
    });
    $("#cbx_refresh_compilers").on('change', function() {
        setCompilersByPing(this.value);
    });
    $("#cbx_refresh_neocli").on('change', function() {
        setIntervalAutomaticNeoCliNodeWithRandomSample(this.value);
    });
    $("#cbx_refresh_gen").on('change', function() {
        setGenesisBlock(this.value);
    });
    $("#cbx_refresh_ecometadata").on('change', function() {
        setEcoInfoRefreshInterval(this.value);
    });
    //=============================================================

    //======== END ON-CHANGE FUNCTIONS ================================
    //=============================================================

    function updateBASEPATHS() {
        BASE_PATH_COMPILERS = $("#compilers_path")[0].value;
        BASE_PATH_ECOSERVICES = $("#eco_services_path")[0].value;
        BASE_PATH_CLI = $("#rpc_nodes_path")[0].value;
        BASE_PATH_NEOSCAN = $("#neoscan_path")[0].value;

        updateNeoScanLinkIfEnable();
    }

    function updateNeoScanLinkIfEnable() {
        if (ENABLE_NEOSCAN_TRACKING) {
            mynetworkIndex = $("#ecolabnetworkurlselection")[0].options[$("#ecolabnetworkurlselection")[0].selectedIndex].index;
            $("#headerNeoScanLink")[0].innerHTML = '<i class="fa fa-th-large" aria-hidden="true"></i> '
            //neocompiler eco
            if (mynetworkIndex == 0)
                $("#headerNeoScanLink")[0].innerHTML += "NeoScan-SharedPrivatenet";

            //local
            if (mynetworkIndex == 1)
                $("#headerNeoScanLink")[0].innerHTML += "NeoScan-PrivateNet";

            // MainNet
            if (mynetworkIndex == 2)
                $("#headerNeoScanLink")[0].innerHTML += "NeoScan-Mainet";

            // Tesnet
            if (mynetworkIndex == 3)
                $("#headerNeoScanLink")[0].innerHTML += "NeoScan-Testnet";

            document.getElementById("headerNeoScanLink").setAttribute("target", "_blank");
            document.getElementById("headerNeoScanLink").setAttribute("href", BASE_PATH_NEOSCAN);
        } else {
            document.getElementById("headerNeoScanLink").setAttribute("href", null);
            $("#headerNeoScanLink")[0].innerHTML = "";
        }
    }

    //===============================================================
    //============= ADD OPTION TO SELECTION BOX =====================
    function addOptionToSelectionBox(textToOption, valueToOption, walletSelectionBox) {
        var option = document.createElement("option");
        option.text = textToOption;
        option.value = valueToOption;
        var select = document.getElementById(walletSelectionBox);
        select.appendChild(option);
    }
    //===============================================================

    function updateCompilersSelectionBox(compilerType) {
        $.get(BASE_PATH_COMPILERS + '/getcompilers',
            function(data) {
                compilerSelectionBoxID = "compilers_versions-selection-box";
                compilerSelectionBoxObj = document.getElementById(compilerSelectionBoxID);
                compilerSelectionBoxObj.options.length = 0;

                for (c = 0; c < data.length; c++) {
                    if (data[c].compiler == compilerType)
                        addOptionToSelectionBox(data[c].version, compilerType + ":" + data[c].version, compilerSelectionBoxID);
                }
                $("#compilebtn")[0].disabled = false;
                //Select the latest as default
                //compilerSelectionBoxObj.selectedIndex = (compilerSelectionBoxObj.length -1)
            },
            "json" // The format the response should be in
        );
    }
    //===============================================================
    //= UPDATE ALL KNOWN SERVICE TO THEIR CONFIGURATION SELELECTION =
    function addAllKnownServiceToSelectionBox(serviceType, networkServicesObj, selectionBoxToFill) {
        //Clear selection box
        document.getElementById(selectionBoxToFill).options.length = 0;
        for (var kn = 0; kn < networkServicesObj.length; kn++) {
            var serviceUrlToAdd = getServiceURLByTypeAndNetwork(serviceType, networkServicesObj[kn]);

            if (serviceUrlToAdd !== '')
                addOptionToSelectionBox(serviceUrlToAdd, serviceUrlToAdd, selectionBoxToFill);
        }
    }
    //===============================================================
    function stopRefreshingDueToConnectionProblems(){
      if(NUMBER_FAILS_REQUESTS > MAX_N_FAILLED_REQUEST_UNTIL_STOP)
      {
        //Check if it was already disabled
        if(!NEO_CLI_REFRESHING_STOPED)
        {
          console.log(NUMBER_FAILS_REQUESTS + "/" + MAX_N_FAILLED_REQUEST_UNTIL_STOP);
          console.log("Time to disable refreshing...");
          // store the last refreshing rate for wallet
          NEO_CLI_REFRESHING_STOPED = true;
          $("#cbx_refresh_wallet").val(0);
          if(refreshIntervalWalletId!=0)
            clearInterval(refreshIntervalWalletId);
          if(refreshIntervalActivityId!=0)
            clearInterval(refreshIntervalActivityId);
          if(refreshHeadersNeoCliNeoScan!=0)
            clearInterval(refreshHeadersNeoCliNeoScan);
        }
      }else {
        if(NEO_CLI_REFRESHING_STOPED)
        {
          console.log(NUMBER_FAILS_REQUESTS + "/" + MAX_N_FAILLED_REQUEST_UNTIL_STOP);
          console.log("Recovering automatic refreshing for balances and headers");
          setWalletRefreshInterval(10000);
          setActivityRefreshInterval(20000);
          setRefreshingIntervalForHeadersInfo(800); //0.8s
          NEO_CLI_REFRESHING_STOPED = false;
        }
      }
    }

    function updatePATHS() {
        mynetworkIndex = $("#ecolabnetworkurlselection")[0].options[$("#ecolabnetworkurlselection")[0].selectedIndex].index;
        stopAllEcoLabFrontEndTimeoutIntervals();
        NEO_CLI_REFRESHING_STOPED = false;

        // Eco shared privatenet
        if (mynetworkIndex == 0) {
            $("#cbx_enable_neoscan")[0].checked = true;
            ENABLE_NEOSCAN_TRACKING = true;
            $("#cbx_query_neoscan")[0].checked = false;
            setWalletRefreshInterval(10000); //10000 millisec
            setActivityRefreshInterval(20000);
            setEcoInfoRefreshInterval(10000);
            setRefreshingIntervalForHeadersInfo(1300); //1.3s
            $("#cbx_refresh_headers").val(1300); // Headers refreshing is declared at headers.html
            setCompilersByPing(20000);
            setIntervalAutomaticNeoCliNodeWithRandomSample(10000);
            if($("#ecolabproviderselection").val() === "NeoCompiler-Eco")
              setGenesisBlock(10000);  //set genesis block for both sharedprivatenet (neocompiler) and localhost

            addAllKnownServiceToSelectionBox("ecocompilers", ecoNodes, "selectionBoxCompilers");
            addAllKnownServiceToSelectionBox("ecoservices", ecoNodes, "selectionBoxEcoServices");
            addAllKnownServiceToSelectionBox("RPC", ecoNodes, "selectionBoxRPCNodes");
            addAllKnownServiceToSelectionBox("neoscan", ecoNodes, "selectionBoxNeoScan");
        }

        // Localhost services
        if (mynetworkIndex == 1) {
            $("#cbx_enable_neoscan")[0].checked = true;
            ENABLE_NEOSCAN_TRACKING = true;
            $("#cbx_query_neoscan")[0].checked = false;
            setWalletRefreshInterval(10000); //10000 millisec
            setActivityRefreshInterval(20000);
            setEcoInfoRefreshInterval(10000);
            setRefreshingIntervalForHeadersInfo(800); //0.8s
            $("#cbx_refresh_headers").val(800);
            setCompilersByPing(25000);
            setIntervalAutomaticNeoCliNodeWithRandomSample(10000);
            if($("#ecolabproviderselection").val() === "NeoCompiler-Eco")
              setGenesisBlock(10000); //set genesis block for both sharedprivatenet (neocompiler) and localhost

            addAllKnownServiceToSelectionBox("ecocompilers", localHostNodes, "selectionBoxCompilers");
            addAllKnownServiceToSelectionBox("ecoservices", localHostNodes, "selectionBoxEcoServices");
            addAllKnownServiceToSelectionBox("RPC", localHostNodes, "selectionBoxRPCNodes");
            addAllKnownServiceToSelectionBox("neoscan", localHostNodes, "selectionBoxNeoScan");
        }

        // MainNet
        if (mynetworkIndex == 2) {
            // TODO - Automatic enable neoscan until NeoCli clients are running plugin UTXO and claim
            $("#cbx_enable_neoscan")[0].checked = true;
            ENABLE_NEOSCAN_TRACKING = true;
            $("#cbx_query_neoscan")[0].checked = true;
            setWalletRefreshInterval(15000); //10000 millisec
            setActivityRefreshInterval(25000);
            setEcoInfoRefreshInterval(15000);
            setRefreshingIntervalForHeadersInfo(10000); //10s
            $("#cbx_refresh_headers").val(10000);
            setCompilersByPing(30000);
            setIntervalAutomaticNeoCliNodeWithRandomSample(15000);

            addAllKnownServiceToSelectionBox("ecocompilers", ecoNodes, "selectionBoxCompilers");
            addAllKnownServiceToSelectionBox("ecoservices", ecoNodes, "selectionBoxEcoServices"); //TODO
            addAllKnownServiceToSelectionBox("RPC", mainNetNodes, "selectionBoxRPCNodes");
            addAllKnownServiceToSelectionBox("neoscan", mainNetNodes, "selectionBoxNeoScan");
            //addAllKnownServiceToSelectionBox("RESTNotifications",mainNetNodes,"selectionBoxRestNotifications");
        }

        // Tesnet
        if (mynetworkIndex == 3) {
            // TODO - Automatic enable neoscan until NeoCli clients are running plugin UTXO and claim
            $("#cbx_enable_neoscan")[0].checked = true;
            ENABLE_NEOSCAN_TRACKING = true;
            $("#cbx_query_neoscan")[0].checked = true;
            setWalletRefreshInterval(15000); //10000 millisec
            setActivityRefreshInterval(25000);
            setEcoInfoRefreshInterval(15000);
            setRefreshingIntervalForHeadersInfo(10000); //10s
            $("#cbx_refresh_headers").val(10000);
            setCompilersByPing(30000);
            setIntervalAutomaticNeoCliNodeWithRandomSample(15000);

            addAllKnownServiceToSelectionBox("ecocompilers", ecoNodes, "selectionBoxCompilers");
            addAllKnownServiceToSelectionBox("ecoservices", ecoNodes, "selectionBoxEcoServices"); //TODO
            addAllKnownServiceToSelectionBox("RPC", testNetNodes, "selectionBoxRPCNodes");
            addAllKnownServiceToSelectionBox("neoscan", testNetNodes, "selectionBoxNeoScan");
            //addAllKnownServiceToSelectionBox("RESTNotifications",mainNetNodes,"selectionBoxRestNotifications");
        }

        $("#compilers_path")[0].value = $("#selectionBoxCompilers")[0].value;
        $("#eco_services_path")[0].value = $("#selectionBoxEcoServices")[0].value;
        $("#rpc_nodes_path")[0].value = $("#selectionBoxRPCNodes")[0].value;
        $("#neoscan_path")[0].value = $("#selectionBoxNeoScan")[0].value;
        //$("#rest_notifications_path")[0].value = $("#selectionBoxRestNotifications")[0].value;

        updateBASEPATHS();
        startSocketIoConnections();
        populateAllWalletData();
    }

    function getCurrentNetworkNickname() {
        mynetworkIndex = $("#ecolabnetworkurlselection")[0].options[$("#ecolabnetworkurlselection")[0].selectedIndex].index;
        if (mynetworkIndex == 0)
            return "SharedPrivateNet";
        if (mynetworkIndex == 1)
            return "LocalPrivateNet";
        if (mynetworkIndex == 2)
            return "MainNet";
        if (mynetworkIndex == 3)
            return "TestNet";
    }

    function goToWalletCentral() {
        $('.nav-pills a[data-target="#wallet"]').tab('show');
    }

    // =======================================================================
    // ======================= COOKIES TEST ==================================
    function recoveringPageData() {
        USER_EXAMPLES = getSmartContractExamplesFromLocalStorage();
        /*
        // DEPRECATED AFTER ANGULAR ROUTES TO TABS
        if (checkCookie("lastactivetab")) {
            index = getCookie("lastactivetab");
            //console.log("Cookie tests. Recovering active tab....");
            if(window.location.hash.slice(10).length == 0)
                $("#pillstab").children().eq(index).find('a').tab('show');
        }
        */
    }

    function storePageData() {
        storeSmartContractExamplesToLocalStorage();
        // DEPRECATED AFTER ANGULAR ROUTES TO TABS
        // setCookie("lastactivetab", $("ul#pillstab li.active").index(), 1);
    }
    // =======================================================================

    function str2hex() {
        var i = 0;
        $("#strhex_hex").val(Neon.u.str2hexstring($("#strhex_str").val()));
        $("#hex_length").val(($("#strhex_hex").val().length / 2).toString());
    };

    function hex2str() {
        $("#strhex_str").val(Neon.u.hexstring2str($("#strhex_hex").val()));
        $("#hex_length").val(($("#strhex_hex").val().length / 2).toString());
    };

    function hex2xeh() {
        $("#hexxeh_xeh").val(revertHexString($("#hexxeh_hex").val()));
        $("#hex_length").val($("#strhex_hex").val().length.toString());
    };

    function xeh2hex() {
        $("#hexxeh_hex").val(revertHexString($("#hexxeh_xeh").val()));
    };

    function num2fixed8() {
        const a = new Neon.u.Fixed8(parseInt($("#fx8_number").val()));
        $("#fx8_hex").val(a.toHex());
    };

    function fixed82num() {
        const a = new Neon.u.Fixed8.fromHex($("#fx8_hex").val());
        $("#fx8_number").val(a);
    };

    function address2scripthash() {
        if ($("#address").val() == "") return;
        $("#scripthash").val(fromBase58($("#address").val()));
    }

    function conv_string_hash() {
        $("#convert_string_hash256")[0].value = Neon.u.hash256($("#convert_string_hash")[0].value);
        $("#convert_string_hash160")[0].value = Neon.u.hash160($("#convert_string_hash")[0].value);
        $("#convert_string_sha256")[0].value = Neon.u.sha256($("#convert_string_hash")[0].value);
    }

    function conv_bigint2bebytearray() {
        valbigint = Number($('#convert_bigint')[0].value);
        //console.log("converting int:"+valbigint);
        $('#convert_bytearray')[0].value = bigint2bebytearray(valbigint);
    }

    function conv_bebytearray2bigint() {
        vbytearray = $('#convert_bytearray')[0].value;
        //console.log("converting int:"+valbigint);
        $('#convert_bigint')[0].value = "" + behex2bigint(vbytearray);
    }

    function scripthash2address() {
        if ($("#scripthash").val() == "") return;
        var b58 = toBase58($("#scripthash").val());
        if (b58 == "")
            b58 = "BAD FORMAT! Expects 20 bytes!";
        $("#address").val(b58);
        //CreateRawTx();
    }

    function frmRPCJson() {
        if ($("#txtRPCJson").val() == "Select a method")
            $("#txtRPCJson").val("");
        else
            $("#txtRPCJson").val("{ \"jsonrpc\": \"2.0\", \"id\": 5, \"method\": \"" + $("#rpcMethod").val() + "\", \"params\": [\"\"] }");
    };

    var createtx_balance = null;

    function verifyRPCNetworkForWithdrawUTXO() {
        myaddress = $("#createtx_from_address")[0].value;
        console.log('getBalance: for: ' + myaddress);
        if (myaddress != "") {
            setNeonApiProvider(getCurrentNetworkNickname());
            NEON_API_PROVIDER.getBalance(myaddress).then(res => updateUTXOSCapture(res));
        }
    }

    function updateUTXOSCapture(res) {
        if (res.address == "not found") {
            alert("address not found!");
            console.log(JSON.stringify(res));
            return;
        }
        createtx_balance = res;
        assetBox = $("#createtx_input_assetid")[0];
        asset = assetBox.options[assetBox.selectedIndex].text;
        //alert("asset:"+this.value+asset);

        //inputbox = document.getElementById("createtx_input_utxo");
        //for(i = inputbox.options.length - 1 ; i >= 0 ; i--)
        //  inputbox.remove(i);

        inputbox2 = document.getElementById("createtx_input_utxo2");
        while (inputbox2.options.length > 0)
            inputbox2.remove(0);

        //console.log(createtx_balance);

        if (asset == "GAS") {
            for (i = 0; i < createtx_balance.assets.GAS.unspent.length; ++i) {
                option = document.createElement("option");
                option.text = "utxo: " + elipsisMiddle(createtx_balance.assets.GAS.unspent[i].txid) + " #" + createtx_balance.assets.GAS.unspent[i].index + " GAS: " + createtx_balance.assets.GAS.unspent[i].value;
                option.value = JSON.stringify(createtx_balance.assets.GAS.unspent[i]);
                //console.log(JSON.parse(option.value).txid);
                //console.log(JSON.parse(option.value).index);
                //console.log(JSON.parse(option.value).value);
                inputbox2.add(option);
            }
        }
        if (asset == "NEO") {
            for (i = 0; i < createtx_balance.assets.NEO.unspent.length; ++i) {
                option = document.createElement("option");
                option.text = "utxo: " + elipsisMiddle(createtx_balance.assets.NEO.unspent[i].txid) + " #" + createtx_balance.assets.NEO.unspent[i].index + " NEO: " + createtx_balance.assets.NEO.unspent[i].value;
                option.value = JSON.stringify(createtx_balance.assets.NEO.unspent[i]);
                //inputbox.add(option);
                inputbox2.add(option);
            }
        }

        $("#createtx_output_addresses").val("");
        $("#createtx_output_values").val("");
        updateOutputValues();
    }

    function ConvertJsonNotifications() {
        //console.log(jsonObj);
        if ($("#txtRPCJsonOut").val() != "") {
            var jsonObj = JSON.parse($("#txtRPCJsonOut").val());
            console.log(jsonObj);

            if (jsonObj.length >= 1 && jsonObj[0].result && jsonObj[0].result.executions) {
                var myNotify = "";
                var notifArray = [];

                notifArray = jsonObj[0].result.executions[0].notifications;

                console.log("notifications:" + JSON.stringify(notifArray));
                for (var nSize = 0; nSize < notifArray.length; nSize++) {
                    var jsonNotificationsObj = notifArray[nSize];
                    myNotify += "Notification " + nSize + " typeI: " + jsonNotificationsObj.state.type + ";";
                    myNotify += " typeII: " + jsonNotificationsObj.state.value[0].type + ";";
                    myNotify += " value(hex): " + jsonNotificationsObj.state.value[0].value + ";";
                    myNotify += " value(string): " + hex2bin(jsonNotificationsObj.state.value[0].value) + ".\n";
                }
                $("#txt_notifications").val(myNotify);
            } else {
                $("#txt_notifications").val("Notifications were not found!");
            }
        } else {
            $("#txt_notifications").val("empty RPC call output to check notification");
        }
    }

    $("#frmRPCJson2").submit(function(e) {
        e.preventDefault(); // Prevents the page from refreshing
        $("#txtRPCJsonOut").val("");
        //curl -s -X POST http://localhost:30335 -H 'Content-Type: application/json' -d '{ "jsonrpc": "2.0", "id": 5, "method": "dumpprivkey", "params": ["AWLYWXB8C9Lt1nHdDZJnC5cpYJjgRDLk17"] }'
        $.post(
            BASE_PATH_CLI, // Gets the URL to sent the post to
            $("#txtRPCJson").val(), // Serializes form data in standard format
            function(data) {
                $("#txtRPCJsonOut").val(JSON.stringify(data, null, '  '));
                ConvertJsonNotifications();
            },
            "json" // The format the response should be in
        ).fail(function() {
            $("#txtRPCJsonOut").val("failed to invoke network!");
        }); //End of POST for search
    });


    // ==================================================================================
    // ================== CREATE RAW UTXO WITHDRAW TRANSACTION BEGINS ===================
    // 14 blocks

    function create_withdrawtx() {
        /*
         TODO: all the blocks that doesn't match with the expected size must do what is defined below:
         if (value > 0xffffffff) write 8 bytes hex
        else if (value > 0xffff) write 4 bytes hex
        else if (value > 0xfc) write 2 bytes hex
        else write 1 byte hex
        */

        wtx = createtx_getWithoutWitness();

        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, pehaps, in terms of an opcodes without 2 bytes (input/output part): ?/12");
            console.log("length: " + wtx.length);
            return;
        }



        var lscripthash = [];
        lscripthash.push($("#createtx_from_scripthash")[0].value); // IGOR

        var script_other = "";

        if ($("#createtx_script_attributes")[0].value.trim().length > 0) { // if hash Script 0x20
            var otherscript = $("#createtx_script_attributes")[0].value;
            var shash = getScriptHashFromAVM(otherscript);
            lscripthash.push(shash);
            script_other += int2hex(0); // no invocation (2 bytes)
            // script_other += int2hex(1);
            //script_other += "51";
            script_other += uint2bytes(otherscript.length / 2);
            script_other += otherscript;

            if (script_other.length % 2 == 1) {
                console.log("Problems were detected with WTX OTHER SCRIPT");
                console.log("length: " + script_other.length);
                return;
            }
        }

        var wtxverif = "";

        var hexavmverif = $("#createtx_from_verification").val(); // invocation
        hexavmverif = hexavmverif.replace(/(\r\n|\n|\r)/gm, "");
        /*block 11*/
        wtxverif += int2hex(hexavmverif.length / 2); // size of invocation script (8 bytes)
        /*block 12*/
        wtxverif += hexavmverif; // invocation script
        console.log("will finish wallet script");
        var hexavm = $("#createtx_from_contract").val();
        hexavm = hexavm.replace(/(\r\n|\n|\r)/gm, "");
        /*block 13*/
        wtxverif += uint2bytes(hexavm.length / 2); // size of verification script (8 bytes)
        console.log("hexavm is:" + hexavm.length / 2 + " with last length:" + uint2bytes(hexavm.length / 2));
        /*block 14*/
        wtxverif += hexavm; // verification script

        if (wtxverif.length % 2 == 1) {
            console.log("Problems were detected with WTX verification!");
            console.log("length: " + wtxverif.length);
            return;
        }


        /*block 10*/
        //if($("#createtx_script_attributes")[0].value.trim().length > 0) // if hash Script 0x20
        //  wtx += "02"
        //else
        //  wtx += "01"; //witness count ( number of scripts) (8 bytes) can be reduced TODO: calculate it
        wtx += int2hex(lscripthash.length); // 01 or 02

        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, ERROR in WITNESS COUNT");
            console.log("length: " + wtx.length);
            return;
        }


        if (lscripthash.length == 1) { // only single witness
            wtx += wtxverif;
            console.log("adding verification script: " + wtxverif);
        } else if (lscripthash.length == 2) {
            // check order
            if (lscripthash[0] < lscripthash[1]) {
                wtx += wtxverif;
                wtx += script_other;
                console.log("adding verification script: " + wtxverif);
                console.log("adding other script: " + script_other);
                console.log(lscripthash);
            } else {
                wtx += script_other;
                wtx += wtxverif;
                console.log("adding other script: " + script_other);
                console.log("adding verification script: " + wtxverif);
                console.log(lscripthash);
            }
        }

        /*block end*/
        wtx = wtx.toLowerCase();
        console.log(wtx);
        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, pehaps, in terms of an opcodes without 2 bytes");
            console.log("length: " + wtx.length);
            return;
        }
        console.log(wtx.length / 2 + " bytes");

        $("#createtx_txhex").val(wtx);
        //$("#createtx_txhash").val(Neon.u.hash256($("#createtx_txhex").val()));
    }

    // ======================================================
    // ======================================================

    function createtx_sign() {
        $('#createtx_from_verification').val("00");
        //if(!document.getElementById("createtx_signature").checkValidity()) { // allow zero or 32 bytes
        if (document.getElementById("createtx_signature").value.length != 64) {
            alert("signature must be hex string of 32 bytes");
            return;
        }
        if (!$("#frm_createtx_withdraw")[0].checkValidity()) {
            $("#frm_createtx_withdraw").find(':submit').click(); // invoke form validation (to display messages)
            return;
        }

        wtx = createtx_getWithoutWitness();
        var wtxHash = "0x" + revertHexString(Neon.u.hash256(wtx));
        $("#createtx_txhash").val(wtxHash);
        console.log("transaction (" + wtxHash + ") " + wtx);
        //alert('oi'+wtx);
        $('#createtx_from_verification').val('40' + Neon.wallet.generateSignature(wtx, $('#createtx_signature')[0].value));
    }

    // ======================================================
    // ======================================================

    function createtx_getWithoutWitness() {
        /*block 0*/
        wtx = "80"; // tx type (1 byte)
        /*block 1*/
        wtx += "00"; //tx version (1 byte)

        var lattribs = $("#createtx_attributes")[0].value.trim().split("\n");
        if (lattribs[0] == "")
            lattribs.pop();
        var numattribs = lattribs.length;
        if (numattribs > 255) {
            console.log("WARNING: too many attributes! Limit is 255 (1 byte)")
            numattribs = 0;
        }

        console.log("Transaction with " + numattribs + " attributes");

        /*block 2*/
        wtx += int2hex(numattribs); //"00"; // number of attributes (1 byte)

        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, probably ATTRIBUTE COUNT!");
            return;
        }

        // add attributes
        for (var i = 0; i < numattribs; i++) {
            console.log("attribute " + i + ":" + lattribs[i].substr(0, 2));
            wtx += lattribs[i]; // attribute code (1byte) + data
        }

        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, probably SOME ATTRIBUTE!");
            return;
        }

        outexpected = 0;
        intxlist = $("#createtx_input_utxo2").val();
        for (var i = 0, size = intxlist.length; i < size; i++) {
            var item = JSON.parse(intxlist[i]).value;
            outexpected += Number(item);
        }

        console.log(intxlist.length + " inputs");
        /*block 3*/
        wtx += int2hex(intxlist.length); // number of inputs (1 byte)
        for (i = 0; i < intxlist.length; i++) {
            /*block 4*/
            wtx += revertHexString(JSON.parse(intxlist[i]).txid); //input hash (32 bytes)
            /*block 5*/
            wtx += revertHexString(int2hex(JSON.parse(intxlist[i]).index, 4)); //input index (2 bytes) (TODO:perhaps reverse is the missing magic?)
        }

        outtxvalues = $("#createtx_output_values").val();
        outtxlist = outtxvalues.split("\n");
        outtxlist = outtxlist.filter(function(n) {
            return n != ""
        });
        outtotal = 0;
        for (var i = 0, size = outtxlist.length; i < size; i++) {
            var item = outtxlist[i];
            num = Number(item);
            if (num < 0) {
                console.log("warning; negative number not allowed as output! " + num + " will become zero! abort...");
                num = 0;
            }
            outtotal += num;
        }
        //console.log("outtotal: "+outtotal);

        outtxvalues = $("#createtx_output_values").val();
        outtxlist = outtxvalues.split("\n");
        outtxlist = outtxlist.filter(function(n) {
            return n != ""
        });
        outtxaddr = $("#createtx_output_addresses").val();
        outtxlist2 = outtxaddr.split("\n");
        outtxlist2 = outtxlist2.filter(function(n) {
            return n != ""
        });
        outtotal = 0;
        for (var i = 0, size = outtxlist.length; i < size; i++) {
            var item = outtxlist[i];
            num = Number(item);
            if (num <= 0) {
                console.log("output value must be positive! got " + num + "... aborting!");
                return;
            }
            outtotal += num;
        }

        change = 0;
        if ($("#createtx_cbx_change")[0].checked)
            change = outexpected - outtotal;

        if ((outtxlist.length != outtxlist2.length) || (outtotal + change != outexpected)) {
            //alert("error building withdraw transaction. verify inputs and outputs.");
            //return;
            if (!window.confirm("inputs and outputs dont match! may become network fee"))
                return;
        }

        console.log(outtxlist.length + (change > 0) + " outputs");
        /*block 6*/
        wtx += int2hex(outtxlist.length + (change > 0)); // number of outputs (including extra one for change) (1 byte)
        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, pehaps, in terms of an opcodes without 2 bytes");
            return;
        }

        for (var i = 0, size = outtxlist.length; i < size; i++) {
            /*block 7*/
            wtx += revertHexString($("#createtx_input_assetid")[0].value); //asset type (32 bytes)
            const txvalue = new Neon.u.Fixed8(Number(outtxlist[i]));
            /*block 8*/
            wtx += revertHexString(txvalue.toHex()); //value of the asset (8 bytes)
            ///*block 9*/wtx += revertHexString(outtxlist2[i]);// address to send the asset to (20 bytes)
            if (Neon.wallet.isAddress(outtxlist2[i]))
                wtx += revertHexString(Neon.wallet.getScriptHashFromAddress(outtxlist2[i]));
            else {
                wtx += revertHexString(outtxlist2[i]); // writes scripthash in little-endian
            }
            if (wtx.length % 2 == 1) {
                console.log("Problems were detected with WTX lenght, pehaps, in terms of an opcodes without 2 bytes");
                return;
            }
        }
        if (change > 0) {
            wtx += revertHexString($("#createtx_input_assetid")[0].value); //asset type (32 bytes)
            const txvalue = new Neon.u.Fixed8(Number(change));
            wtx += revertHexString(txvalue.toHex());
            wtx += revertHexString($("#createtx_from_scripthash")[0].value);
        }
        console.log(wtx);
        if (wtx.length % 2 == 1) {
            console.log("Problems were detected with WTX lenght, pehaps, in terms of an opcodes without 2 bytes");
            return;
        }
        return wtx;
    }
    // ======================================================
    // ======================================================

    $("#frm_createtx_withdraw").submit(function(e) {
        e.preventDefault(); // Prevents the page from refreshing
        //create_withdrawtx();
        wtx = $("#createtx_txhex").val();
        sendRawTXToTheRPCNetwork(wtx);
    });
    // ================== CREATE RAW UTXO WITHDRAW TRANSACTION FINISHES==================
    // ==================================================================================
    $("#createtx_from_contract").on('keyup', function() {
        var hexavm = $("#createtx_from_contract").val();
        hexavm = hexavm.replace(/(\r\n|\n|\r)/gm, "");
        var shash = getScriptHashFromAVM(hexavm);
        $("#createtx_from_scripthash")[0].value = shash;
        $("#createtx_from_address")[0].value = toBase58(shash);
    });

    function updateOutputValues() {
        outtxvalues = $("#createtx_output_values").val();
        outtxlist = outtxvalues.split("\n");
        outtxlist = outtxlist.filter(function(n) {
            return n != ""
        });
        outtotal = 0;

        for (var i = 0, size = outtxlist.length; i < size; i++) {
            var item = outtxlist[i];
            num = Number(item);
            if (num < 0) {
                console.log("warning; negative number not allowed as output! " + num + " will become zero!");
                num = 0;
            }
            outtotal += num;
        }
        //console.log("outtotal: "+outtotal);

        outexpected = 0;
        intxlist = $("#createtx_input_utxo2").val();
        for (var i = 0, size = intxlist.length; i < size; i++) {
            var item = JSON.parse(intxlist[i]).value;
            outexpected += Number(item);
        }

        if (outtotal > outexpected)
            $("#createtx_output_total").text("Total: " + outtotal + " (OUTPUT EXCEEDED: " + outexpected + ")");
        else {
            if ($("#createtx_cbx_change")[0].checked) {
                $("#createtx_output_total").text("Total OK: " + outtotal + " (CHANGE: " + (outexpected - outtotal) + ")");
                var wtx = createtx_getWithoutWitness();
                var wtxHash = "0x" + revertHexString(Neon.u.hash256(wtx));
                $("#createtx_txhash").val(wtxHash);
            } else
                $("#createtx_output_total").text("Total: " + outtotal + (outtotal != outexpected ? " (ERROR EXPECTED: " + outexpected + ")" : " (OK)"));
        }
    }

    $("#createtx_output_values").on('keyup', function() {
        updateOutputValues();
    });

    $("#createtx_from_verification").on('keyup', function() {
        var hexavm = $("#createtx_from_verification").val();
        hexavm = hexavm.replace(/(\r\n|\n|\r)/gm, "");
        $("#createtx_from_verification_opcodes").val("");
        $("#createtx_from_verification_opcodes").text("" + (hexavm.length / 2) + " bytes\n");
        printOpcode(hexavm, $("#createtx_from_verification_opcodes"));
    });

    //This uses local routes
    function getNodeInfo() {
        $.get(BASE_PATH_ECOSERVICES + '/statusnode/1', function(data) {
            $("#node1data").val(data.replace(/[^\x00-\x7F]/g, ""));
            $("#node1data").scrollTop($("#node1data")[0].scrollHeight);
        });
        $.get(BASE_PATH_ECOSERVICES + '/statusnode/2', function(data) {
            $("#node2data").val(data.replace(/[^\x00-\x7F]/g, ""));
            $("#node2data").scrollTop($("#node2data")[0].scrollHeight);
        });
        $.get(BASE_PATH_ECOSERVICES + '/statusnode/3', function(data) {
            $("#node3data").val(data.replace(/[^\x00-\x7F]/g, ""));
            $("#node3data").scrollTop($("#node3data")[0].scrollHeight);
        });
        $.get(BASE_PATH_ECOSERVICES + '/statusnode/4', function(data) {
            $("#node4data").val(data.replace(/[^\x00-\x7F]/g, ""));
            $("#node4data").scrollTop($("#node4data")[0].scrollHeight);
        });
        $.get(BASE_PATH_ECOSERVICES + '/statusnode/0', function(data) {
            $("#noderpcdata").val(data.replace(/[^\x00-\x7F]/g, ""));
            $("#noderpcdata").scrollTop($("#noderpcdata")[0].scrollHeight);
        });
    }

    // btnfunction for calling CN set time from form
    function onClickBtnSetCNBlockTime() {
        setConsensusNodesBlockTime($("#cbx_spb_cn").val(), $("#cbx_pwd_cn").val());
    }

    // Set CN blockTime
    function setConsensusNodesBlockTime(blockTime, pwd) {
        if(!blockTime || !pwd)
        {
          console.log("Password or blockTime can not be empty. pwd: " + pwd + " blockTime:" + blockTime);
          return;
        }

        $.get(BASE_PATH_ECOSERVICES + '/setconsensusnodesblocktime/1/' + blockTime + '/' + pwd, function(data) {
            console.log(data)
        });
        $.get(BASE_PATH_ECOSERVICES + '/setconsensusnodesblocktime/2/' + blockTime + '/' + pwd, function(data) {
            console.log(data)
        });
        $.get(BASE_PATH_ECOSERVICES + '/setconsensusnodesblocktime/3/' + blockTime + '/' + pwd, function(data) {
            console.log(data)
        });
        $.get(BASE_PATH_ECOSERVICES + '/setconsensusnodesblocktime/4/' + blockTime + '/' + pwd, function(data) {
            console.log(data)
        });
    }

    function onClickPostServerToResetDockerService() {
        postServerToResetDockerService($("#cbx_pwd_reset_service").val());
    }

    function postServerToResetDockerService(pwd) {
        if(getCurrentNetworkNickname() == "SharedPrivateNet")
        {
          $.get(BASE_PATH_ECOSERVICES + '/resetdockerservice/' + pwd, function(data) {
              console.log(data);
          });
        }else{
          console.error("Reset only works for SharedPrivateNet EcoService.")
        }
    }

    //Route for getting incremental storage from node with statedumper
    function getIncrementalStorageInfo() {
        var heightToGet = $("#heightForIncStorage").val();
        $.get(BASE_PATH_ECOSERVICES + '/incstorage/' + heightToGet, function(data) {
            $("#textAreaOfIncrementalStorage").val(data);
            $("#textAreaOfIncrementalStorage").scrollTop($("#textAreaOfIncrementalStorage")[0].scrollHeight);
        });
    }

    function SetExampleFromCookies(key) {
        //console.log("Selecting example: " + selected_index + " for Compiler: " + language);
        aceEditor.getSession().setValue("");
        aceEditor.getSession().setValue(USER_EXAMPLES.get(key).code);
        $("#cbx_example_name")[0].value = key;
    }

    function setExample(language, selected_index) {
        //console.log("Selecting example: " + selected_index + " for Compiler: " + language);
        aceEditor.getSession().setValue("");
        getfile(language, selected_index, 0);

        // cleaning file to Save name
        $("#cbx_example_name")[0].value = "";
    }

    function getfile(language, selected_index, index = 0) {
        var vExamples = cSharpFiles;
        if(language === "python")
          vExamples = cPythonFiles;
        if(language === "java")
          vExamples = cJavaFiles;
        if(language === "golang")
          vExamples = cGolangFiles;

        var numfiles = vExamples[selected_index].length;
        if (index < numfiles) {
            var file = vExamples[selected_index][index];
            //console.log("getting example file: " + file);
            $.get(file, function(data) {
                aceEditor.getSession().setValue(aceEditor.getSession().getValue() + data);
                getfile(language, selected_index, index + 1);
            });
        }
    }
    //===============================================================

    //===============================================================
    //============== SEND TX FUNCTIONS FROM FORM ====================
    //===============================================================
    function createSendTxForm() {
        var addrFromIndex = $("#createtx_from")[0].selectedOptions[0].index;
        var addrToIndex = $("#createtx_to")[0].selectedOptions[0].index;
        var addrToValue = ECO_WALLET[addrToIndex].account.address;
        if (ECO_WALLET[addrFromIndex].account.isMultiSig) {
            var jsonArrayWithPrivKeys = getMultiSigPrivateKeys(addrFromIndex);
            //Multi-sig address
            createTxFromMSAccount(addrFromIndex, addrToValue, $("#createtx_NEO").val(), $("#createtx_GAS").val(), getCurrentNetworkNickname());
        } else {
            //TODO add verification for watch only
            createTxFromAccount(addrFromIndex, addrToValue, $("#createtx_NEO").val(), $("#createtx_GAS").val(), BASE_PATH_CLI, getCurrentNetworkNickname());
        }
    };

    function createGasTxForm() {
        var addrFromIndex = $("#createtx_from")[0].selectedOptions[0].index;
        if (ECO_WALLET[addrFromIndex].account.isMultiSig) {
            var jsonArrayWithPrivKeys = getMultiSigPrivateKeys(addrFromIndex);
            //Multi-sig address
            createClaimMSGasTX(addrFromIndex, jsonArrayWithPrivKeys, getCurrentNetworkNickname())
        } else {
            //TODO add verification for watch only
            createClaimGasTX(addrFromIndex, BASE_PATH_CLI, getCurrentNetworkNickname());
        }
    };
    //===============================================================
    //============== FORMS ==========================================
    //===============================================================
    $("#formCompile").submit(function(e) {
        $("#codewarnerr").val("Remote compiling at "+BASE_PATH_COMPILERS+"...");
        $("#compilebtn")[0].disabled = true;
        $("#code_cs").val("");
        $("#code_python").val("");
        $("#code_golang").val("");
        $("#code_java").val("");
        $("#codeavm").val("");
        $("#opcodes").val("");
        $("#codeabi").val("");
        $("#invokehashjs").val("");
        $("#contracthashjs").val("");
        $("#contractparams").val("\"\"");
        $("#selected_compiler_form").val(SELECTED_COMPILER);
        if (SELECTED_COMPILER == "csharp") {
            $("#code_cs").val(ace.edit("aceEditor").getSession().getValue());
            console.log("Compiling C# code...");
        }
        if (SELECTED_COMPILER == "python") {
            $("#code_python").val(ace.edit("aceEditor").getSession().getValue());
            console.log("Compiling Python code...");
        }
        if (SELECTED_COMPILER == "golang") {
            $("#code_golang").val(ace.edit("aceEditor").getSession().getValue());
            console.log("Compiling Golang code...");
        }
        if (SELECTED_COMPILER == "java") {
            $("#code_java").val(ace.edit("aceEditor").getSession().getValue());
            console.log("Compiling Java code...");
        }
        e.preventDefault(); // Prevents the page from refreshing
        var $this = $(this); // `this` refers to the current form element
        var indata = $(this).serialize();
        $.post(
            BASE_PATH_COMPILERS + $this.attr("action"), // Gets the URL to sent the post to
            indata, // Serializes form data in standard format
            function(data) {
                console.log("finished compiling");
                $("#compilebtn")[0].disabled = false;
                var coderr = atob(data.output);
                $("#codewarnerr").val(coderr);
                var hexcodeavm = atob(data.avm);
                $("#codeavm").val(hexcodeavm);
                hexcodeavm = hexcodeavm.replace(/(\r\n|\n|\r)/gm, "");
                $("#opcodes").val("");
                //printOpcode(hexcodeavm, $("#opcodes"));
                //console.log("GRAVANDO BINARIO: "+typeof(datacontent)+":"+datacontent);
                localStorage.setItem('avmFile', hexcodeavm); //, {type: 'application/octet-stream'});
                //datacontent = localStorage.getItem('avmFile', {type: 'application/octet-stream'});
                //console.log("LENDO BINARIO: "+typeof(datacontent)+":"+datacontent);
                //console.log(localStorage.getItem('avmFile').charCodeAt(0));
                //$("#btn_download")[0].style = "";

                //filling hashes
    	          var contractScriptHash = getScriptHashFromAVM(hexcodeavm);
                var avmSize = Math.ceil(hexcodeavm.length/2);
                updateCompiledOrLoadedContractInfo(contractScriptHash,avmSize);
                // Loading all ABI related boxes
                if(data.abi != "")
                {
                  var codeabi = atob(data.abi);
                  console.log(codeabi);
    	            updateAllABIDependencies(JSON.parse(codeabi));
                }
            },
            "json" // The format the response should be in
        ); //End of POST for Compile

        //Send info to EcoServices for counting number of compilations
        $.post(
            BASE_PATH_ECOSERVICES + "/compileCounter", // Gets the URL to sent the post to
            null, // Serializes form data in standard format
            function(data) {},
            "json" // The format the response should be in
        ); //End of POST for Compile counter

    }); //End of form Compile function
    //===============================================================

    function updateCompiledOrLoadedContractInfo(contractScriptHash, avmSize) {
      $("#contractInfo_ScriptHash")[0].value = contractScriptHash;
      $("#contractInfo_Address")[0].value = toBase58(contractScriptHash);
      updateScriptHashesBoxes(contractScriptHash);

      // ------------------------------------------
      // calculating extra fee according to AVM size
      var fixedAVGTxSize = 500; //TODO
      $("#contractInfo_AVMSize")[0].value = avmSize;
      // TODO - Create a call on neo-plugins SimplePolicy
      var freeSize = 1024;
      var feePerExtraByte = 0.00001;
      var extraGasNetFeeForBigTx = 0;
      // TODO Extra size workaround due to inputs lenght
      var avmWithExtraSize = avmSize + fixedAVGTxSize;
      if ( avmWithExtraSize > freeSize)
      extraGasNetFeeForBigTx = (avmWithExtraSize-freeSize)*feePerExtraByte;
      $("#attachDeployGasFeeJS")[0].value = extraGasNetFeeForBigTx;
      // ------------------------------------------
    }
    //===============================================================
    //Invoke JS
    $("#forminvokejs").submit(function(e) {
        //$("#contractmessages").text("");
        //$("#contractmessagesnotify").text("");
        e.preventDefault(); // Prevents the page from refreshing
        var $this = $(this); // `this` refers to the current form element
        var indata = $(this).serialize();

        var wI = $("#wallet_invokejs")[0].selectedOptions[0].index;
        var attachgasfeejs = Number($("#attachgasfeejs").val());
        var attachsystemgasjs = Number($("#attachSystemgasjs").val());
        var attachneojs = Number($("#attachneojs").val());
        var attachgasjs = Number($("#attachgasjs").val());
        var invokeScripthash = $("#invokehashjs").val();

        var invokefunc = "";
        // INVOKE function is already passed as a String parameter!!

        //if($("#invokefunctionjs")[0].value != "Main")
        //	invokefunc = $("#invokefunctionjs")[0].value;

        var neonJSParams = [];
        if($("#invokeparamsjs")[0].value != "")
          neonJSParams = JSON.parse($("#invokeparamsjs")[0].value);

        InvokeFromAccount(wI, attachgasfeejs, attachsystemgasjs, attachneojs, attachgasjs, invokeScripthash, invokefunc, BASE_PATH_CLI, getCurrentNetworkNickname(), neonJSParams);

        //Send info to EcoServices for counting number of invokes
        $.post(
            BASE_PATH_ECOSERVICES + "/invokecounter", // Gets the URL to sent the post to
            null, // Serializes form data in standard format
            function(data) {},
            "json" // The format the response should be in
        ); //End of POST for Compile counter
    }); //End of invoke function
    //===============================================================

    //===============================================================
    //Deploy JS
    $("#formdeployjs").submit(function(e) {
        //$("#contractmessages").text("");
        //$("#contractmessagesnotify").text("");
        e.preventDefault(); // Prevents the page from refreshing
        var $this = $(this); // `this` refers to the current form element
        var indata = $(this).serialize();
        var contractGasCost = 90;
        var wI = $("#wallet_deployjs")[0].selectedOptions[0].index;
        var storage = 0;

        var rT = $("#contractreturnjs").val();
        if ($("#contractreturnjs").val() == "f0" || $("#contractreturnjs").val() == "ff")
            rT += "00"; // ff becomes 'ff00' (biginteger representation)

        var params = $("#contractparamsjs").val();

        //console.log("Parameter list: "+params);
        //console.log("Return type: "+rT);

        var script = $("#codeavm").val().replace(/(\r\n|\n|\r)/gm, "");

        console.log("Deploying contract: '" + script + "' scripthash: '" + $("#contracthashjs").val() + "' storage: '" + $("#cbx_storagejs").val() + "' di: '" + $("#cbx_dynamicinvokejs").val() + "' RT: '" + $("#contractreturnjs").val() + "' RT: '" + $("#contractreturnjs").val() + "' with params '" + $("#contractparamsjs").val() + "'");

        if ($("#cbx_storagejs")[0].checked) {
            contractGasCost += 400;
            storage += 1;
        }

        if ($("#cbx_dynamicinvokejs")[0].checked) {
            contractGasCost += 500;
            storage += 2;
        }

        if ($("#cbx_ispayablejs")[0].checked) {
            storage += 4;
        }

        console.log("Final attached gas should be:" + contractGasCost)

        var contract_name = $("#jsdeploy_name").val();
        var contract_desc = $("#jsdeploy_desc").val();
        var contract_email = $("#jsdeploy_email").val();
        var contract_author = $("#jsdeploy_author").val();
        var contract_version = $("#jsdeploy_version").val();

        //console.log(contract_name+contract_desc+contract_email+contract_author+contract_version);

        var attachDeploygasfeejs = Number($("#attachDeployGasFeeJS").val());

        DeployFromAccount(wI, attachDeploygasfeejs, contractGasCost, BASE_PATH_CLI, getCurrentNetworkNickname(), script, storage, rT, params, contract_desc, contract_email, contract_author, contract_version, contract_name);

        //Send info to EcoServices for counting number of deploys
        $.post(
            BASE_PATH_ECOSERVICES + "/deploycounter", // Gets the URL to sent the post to
            null, // Serializes form data in standard format
            function(data) {},
            "json" // The format the response should be in
        ); //End of POST for Compile counter

    }); //End of deploy function
    //===============================================================

    $("#getnep5balance").submit(function (e) {
    	    e.preventDefault(); // Prevents the page from refreshing
    	    $("#output_getnep5").val("");
    	    $("#output_getnep5_extra").val("");
    	    var addressRevertedScriptHash = revertHexString(fromBase58($("#getnep5_address")[0].value));
    	    strrequest = '{ "jsonrpc": "2.0", "id": 5, "method": "getstorage", "params": ["'+$("#getnep5_contract")[0].value+'","'+addressRevertedScriptHash+'"]}';
    	    //console.log($("#neonodeurl")[0].value);
    	    //console.log(strrequest);
    	    $.post(
    		BASE_PATH_CLI, // Gets the Neo-CLi URL to sent the post to
    		strrequest,
    		function (data) {
    		  //console.log(data);
    		  valfixed8 = data.result;
          if(data.result==null)
          {
            $("#output_getnep5").val("Error! Storage was not found.");
            return;
          }
    		  const a = new fixed8FromHex(revertHexString(valfixed8));
    		  $("#output_getnep5").val(a);

    		  strgetblock = '{ "jsonrpc": "2.0", "id": 5, "method": "getblockcount", "params": [""] }';
    		  $.post(
    		      BASE_PATH_CLI, // Gets the URL to sent the post to
    		      strgetblock,
    		      function (data2) {
    		        //console.log(data);
    		        blockheight = data2.result;
    		        //addr = toBase58($("#getnep5_address")[0].value);
    			      addr=$("#getnep5_address")[0].value;
    		        $("#output_getnep5_extra").val(addr + " / H:"+blockheight);
    		      },
    		      "json" // The format the response should be in
    		  ).fail(function() {
    		      $("#output_getnep5_extra").val("failed to invoke network!");
    		  }); //End of POST for search

    		},
    		"json" // The format the response should be in
    	    ).fail(function() {
    		$("#output_getnep5").val("failed to invoke network!");
    	    }); //End of POST for search
    });

    $("#formgetstorage").submit(function(e) {
        e.preventDefault(); // Prevents the page from refreshing
        //Clean previous storage values
        $("#gsf_contractvaluehex")[0].value = "";
        $("#gsf_contractvaluestr")[0].value = "";
        $("#gsf_contractvalueint")[0].value = "";

        //Get the hash and key
        sthash = $("#gsf_contracthash")[0].value;
        stkey = $("#gsf_contractkey")[0].value;
        if ($("#getStorageFormat")[0].value == "String (no quotes)") {
            stkey = str2hexstring(stkey);
        }

        console.log("looking for storage key '" + stkey + "' at contract '" + sthash + "'" + " in the network " + $("#rpc_nodes_path")[0].value);
        getStorage(sthash, stkey, $("#rpc_nodes_path")[0].value).then(function(data) {
            $("#gsf_contractvaluehex")[0].value = data.result;
            if (data.result != null){
                $("#gsf_contractvaluestr")[0].value = hexstring2str(data.result);
                $("#gsf_contractvalueint")[0].value = parseInt("0x"+revertHexString(data.result));
            } else {
                $.post(
                    $("#rpc_nodes_path")[0].value, // Gets the URL to sent the post to
                    '{ "jsonrpc": "2.0", "id": 5, "method": "getcontractstate", "params": ["' + sthash + '"] }', // Serializes form data in standard format
                    function(data2) {
                        if (data2.result) { // contract exists
                            if (data2.result.properties.storage)
                                $("#gsf_contractvaluehex")[0].value = "contract exists (but key does not)!";
                            else
                                $("#gsf_contractvaluehex")[0].value = "contract exists (but did not pay for Storage on deploy)!";
                        } else if (data2.error.code == -100)
                            $("#gsf_contractvaluehex")[0].value = "contract does not exist (must deploy first)!";
                        else {
                            $("#gsf_contractvaluehex")[0].value = "some strange error happened!";
                            console.log(data2);
                        }
                    },
                    "json" // The format the response should be in
                ).fail(function() {
                    $("#gsf_contractvaluehex")[0].value = "failed to invoke network!";
                }); //End of POST for search
            }
        });
    }); //End of storage read function
    //===============================================================
    function setCompiler(language){
        var vExamples;
        SELECTED_COMPILER = language;
        if (language === "csharp") {
            aceEditor.getSession().setMode("ace/mode/csharp");
            updateCompilersSelectionBox("docker-mono-neo-compiler");
            vExamples = cSharpFiles;
            $("#cbx_example_name")[0].placeholder = "myexample.cs";
        }
        if (language === "python") {
            aceEditor.getSession().setMode("ace/mode/python");
            updateCompilersSelectionBox("docker-neo-boa");
            vExamples = cPythonFiles;
            $("#cbx_example_name")[0].placeholder = "myexample.py";
        }
        if (language === "golang") {
            aceEditor.getSession().setMode("ace/mode/golang");
            updateCompilersSelectionBox("docker-neo-go");
            vExamples = cGolangFiles;
            $("#cbx_example_name")[0].placeholder = "myexample.go";
        }
        if (language === "java") {
            aceEditor.getSession().setMode("ace/mode/java");
            updateCompilersSelectionBox("docker-java-neo-compiler");
            vExamples = cJavaFiles;
            $("#cbx_example_name")[0].placeholder = "myexample.java";
        }

        var exampleListUl = document.getElementById("ExampleList");
        exampleListUl.innerHTML = ""
        for(var e=0; e < vExamples.length; e++)
        {
          var exampleToAdd = document.createElement("li");
          exampleToAdd.setAttribute('value', i);
          var onClickFunction = 'setExample("' + language + '","' + e + '");';
          exampleToAdd.setAttribute('onClick', onClickFunction)
          exampleToAdd.setAttribute('id', "loadedExample" + i);
          var cutSize = "/examples/"+language+"/";
          var exampleName = vExamples[e][0].slice(cutSize.length);
          exampleToAdd.appendChild(document.createTextNode(exampleName));
          exampleListUl.appendChild(exampleToAdd);
        }

        //Checking all cookies
        USER_EXAMPLES.forEach(function(value, key) {
            addCSContractFromLocalMap(value, key, language);
        });
        if(USER_EXAMPLES.size == 0)
        {
            setExample(language, 0);
        } else {
            var firstMapKey = USER_EXAMPLES.entries().next().value[0];
            SetExampleFromCookies(firstMapKey);
        }
    };
    //===============================================================
    $("#btn_downloadOpCode").click(function(e) {
        e.preventDefault();
        mydata = $('#frm_disassembly').contents().find('#opcodes').val();
        console.log(mydata);
        var file = new Blob([mydata], {
            type: 'text/plain'
        });
        download(file, ".opcodes");
    });
    //===============================================================

    function moveLastTab(){
      $('.nav-pills a[data-target="#' + LAST_ACTIVE_TAB_BEFORE_ACTIVITY + '"]').tab('show');
    }
    //===============================================================
    //============== END FORMS ======================================
    //===============================================================

    function sendRawTXFromPendingTx(){
      sendingTxPromiseWithEcoRaw(PendingTX,PendingTXParams);
    }
    </script>
</div>
